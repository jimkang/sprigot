!function t(e,n,r){function i(a,u){if(!n[a]){if(!e[a]){var s="function"==typeof require&&require;if(!u&&s)return s(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(t){var e={serverURL:t,queuesForIntervals:{}};return e.request=function(t,e){var n=new XMLHttpRequest;n.open("POST",this.serverURL),n.setRequestHeader("Content-Type","application/json"),n.setRequestHeader("accept","application/json"),n.onload=function(){if(200===this.status){var t=JSON.parse(this.responseText);e(null,t)}else e(this.status,null)},n.send(JSON.stringify(t))},e.addRequestToQueue=function(t,e,n){var r=queuesForIntervals.toString(),i=null;r in this.queuesForIntervals?i=this.queuesForIntervals[r]:(i=[],this.queuesForIntervals[r]=i),i.push({jsonBody:e,done:n})},e}e.exports=r},{}],2:[function(t,e,n){function r(t){var e={locked:!1,rootSelection:null,boardSelection:null,zoomBehavior:null,parsedPreLockTransform:null,scaleExtent:t,setUpZoomOnBoard:function(t,n){var r=this.getActualWidth(t.node()),o=this.getActualHeight(t.node()),a=i.scale.linear().domain([0,r]).range([0,r]),u=i.scale.linear().domain([0,o]).range([o,0]);e.zoomBehavior=i.behavior.zoom().x(a).y(u).scaleExtent(this.scaleExtent).on("zoom",e.syncZoomEventToTransform),e.boardSelection=t,e.boardSelection.call(e.zoomBehavior),e.rootSelection=n},syncZoomEventToTransform:function(){e.locked||e.rootSelection.attr("transform","translate("+i.event.translate+") scale("+i.event.scale+")")},resetZoom:function(){e.locked||rootSelection.attr("transform","translate(0, 0) scale(1)")},lockZoomToDefault:function(){e.resetZoom(),e.locked=!0},lockZoom:function(){e.locked=!0},unlockZoom:function(){e.locked=!1,e.parsedPreLockTransform&&(e.tweenToNewZoom(e.parsedPreLockTransform.scale,e.parsedPreLockTransform.translate,300),e.parsedPreLockTransform=null)},lockZoomToDefaultCenterPanAtDataCoords:function(t){e.parsedPreLockTransform=e.parseScaleAndTranslateFromTransformString(e.rootSelection.attr("transform")),e.panToCenterOnRect(t),e.lockZoom()},panToCenterOnRect:function(t,n,r){n||(n=300);var i=this.getActualWidth(this.boardSelection.node()),o=this.getActualHeight(this.boardSelection.node()),a=1,u=e.rootSelection.attr("transform");if(u){var s=e.parseScaleAndTranslateFromTransformString(u);a=s.scale}e.tweenToNewZoom(a,[-t.x-t.width/2+i/2,-t.y-t.height/2+o/2],n,r)},tweenToNewZoom:function(t,n,r,o){var a=e.rootSelection.attr("transform"),u=i.transition().duration(r).tween("zoom",function(){var r=1,o=[0,0];if(a){var u=e.parseScaleAndTranslateFromTransformString(a);r=u.scale,o=u.translate}var s=i.interpolate(r,t);return interpolateTranslation=i.interpolate(o,n),function(t){var n=s(t);e.zoomBehavior.scale(n);var r=interpolateTranslation(t);e.zoomBehavior.translate(r),e.rootSelection.attr("transform","translate("+r[0]+", "+r[1]+") scale("+n+")")}});o&&u.each("end",o)},parseScaleAndTranslateFromTransformString:function(t){var e={scale:1,translate:[0,0]};if(t&&t.length>0){var n=t.split("scale(")[1];n&&(e.scale=parseFloat(n.substr(0,n.length-1)));var r=t.split(") ")[0].split(",");e.translate=[parseFloat(r[0].substr(10)),parseFloat(r[1])],e.translate[1]||console.log("Got NaN out of",r)}return e},getActualHeight:function(t){var e=t.clientHeight;return 1>e&&(e=t.parentNode.clientHeight),e},getActualWidth:function(t){var e=t.clientWidth;return 1>e&&(e=t.parentNode.clientWidth),e},translateYFromSel:function(t){return t.attr("transform").split(",")[1].split(".")[0]},translateXFromSel:function(t){return t.attr("transform").split(",")[0].split(".")[0].split("(")[1]},panToElement:function(t,n){var r=e.zoomBehavior.scale(),i=parseInt(e.translateYFromSel(t))*r,o=parseInt(e.translateXFromSel(t))*r;e.panToCenterOnRect({x:o,y:i,width:1,height:1},750,n)}};return e}var i=t("./lib/d3-small");e.exports=r},{"./lib/d3-small":14}],3:[function(t,e,n){function r(t){var e={svgEl:t,hitRectSVG:t.createSVGRect(),hitPointSVG:t.createSVGPoint()};return e.hitRectSVG.width=100,e.hitRectSVG.height=100,e.elementsAtPoint=function(t){return this.hitRectSVG.x=t[0],this.hitRectSVG.y=t[1],this.svgEl.getIntersectionList(this.hitRectSVG,null)},e.elementsHittingEl=function(t){var e=t.getCTM(),n=t.getBBox(),r=this.svgEl.createSVGPoint();this.hitPointSVG.x=n.x,this.hitPointSVG.y=n.y,r.x=n.x+n.width,r.y=n.y+n.height;var i=this.hitPointSVG.matrixTransform(e);n.x=i.x,n.y=i.y;var o=r.matrixTransform(e);return n.width=o.x-i.x,n.height=o.y-i.y,this.svgEl.getIntersectionList(n,null)},e}e.exports=r},{}],4:[function(t,e,n){function r(t){function e(t){return document.createElement(t.elementType)}function n(t){var n=s.selectAll(l).data(t,o());n.enter().append(l).append(e).classed(c,!0).attr("id",h).on("click",u),n.exit().classed("fade-out",!0).transition().delay(300).remove();var i=n.selectAll(l+" > *");i.each(r),i.text(f)}function r(t){if(t.attributes){var e=i.select(this);for(var n in t.attributes)e.attr(n,t.attributes[n])}}function u(t){t.onClick&&t.onClick()}var s,l,c;if(t&&(s=t.root,l=t.baseElementType,c=t.baseClass),!s)throw new Error("No root passed to renderAdminPanel.");l||(l="div"),c||(c="generic-control");var f=o("text"),h=o();return a(n)}{var i=t("./lib/d3-small"),o=t("accessor"),a=t("export-methods");t("lodash")}e.exports=r},{"./lib/d3-small":14,accessor:17,"export-methods":18,lodash:20}],5:[function(t,e,n){var r=t("lodash");D3SprigBridge={validSprigPropertyList:["id","doc","title","body","emphasize","created","modified","tags","formats"]},D3SprigBridge.serializeTreedNode=function(t){var e=r.pick(t,this.validSprigPropertyList),n=t.children;return t.children||(n=t._children),n&&(e.children=r.pluck(n,"id")),e},D3SprigBridge.sanitizeTreeForD3=function i(t){if("object"==typeof t.children){for(var e=[],n=[],r=0;r<t.children.length;++r){var o=t.children[r];"object"==typeof o?n.push(o):e.push(o)}e.length>0&&(delete t.children,t.childRefs=e),n.length>0&&(t.children=n,t.children.forEach(i))}return t},D3SprigBridge.mapPathToSprigId=function(t,e,n){function r(e){return e.id===t}return this.mapPathInD3Tree(r,e,n)},D3SprigBridge.mapPathInD3Tree=function(t,e,n){if(t(e))return[e];for(var r=[],i={},o=null,a=0,u=null,s=[e];n>=a;){u=[];for(var l=0;l<s.length;++l){var c=s[l];if(t(c)){o=c;break}if(n>=a+1&&c){var f=[];"object"==typeof c.children&&c.children?f=c.children:"object"==typeof c._children&&c._children&&(f=c._children),f.forEach(function(t){i[t.id]=c}),u=u.concat(f)}}if(o)break;a++,s=u}if(o)for(var c=o;c;)r.unshift(c),c=c.id in i?i[c.id]:null;return r},D3SprigBridge.flattenTreeBreadthFirst=function(t,e){e||(e=1e3);for(var n=[],r=0,i=null,o=[t];e>=r&&o.length>0;){i=[];for(var a=0;a<o.length;++a){var u=o[a];if(e>=r+1&&u){var s=[];"object"==typeof u.children&&u.children?s=u.children:"object"==typeof u._children&&u._children&&(s=u._children),i=i.concat(s)}"object"==typeof u&&n.push(this.serializeTreedNode(u))}r++,o=i}return n},D3SprigBridge.flattenTreeDepthFirst=function(t){var e=[this.serializeTreedNode(t)],n=[];for(t.children&&n.push(t.children);n.length>0;){var r=n[0];if(r.length>0){var i=r.shift();i.children&&i.children.length>0&&n.unshift(i.children),e.push(this.serializeTreedNode(i))}else n.shift()}return e},e.exports=D3SprigBridge},{lodash:20}],6:[function(t,e,n){function r(t,e){var n=t.format?t.format:"sprigot";h&&h.controllerType===n?(h.opts=t,setTimeout(e,0)):(h="bloge"===t.format?g(t):"newdoc"===t.format?p(t):v(t),h.init(e))}function i(t){function e(t,e){t?console.log("Error",t):e?(n.format||(n.format=e.format),n.doc||(n.doc=e),i.length>1&&(n.initialTargetSprigId=i[2]),n.loadDone=a,r(n,u)):console.log("Could not find doc",d)}var n=f(c(t)),i=t.split("/");i.length>0&&"new"===i[1]?(n.format="newdoc",n.loadDone=a,r(n,u)):(d=o(i),_(d)?y.getDoc(d,e):r({format:"sprigot",rootId:d,initialTargetSprigId:i[2],loadDone:a}))}function o(t){return t.length<2||!t[1]?m.defaultDoc:t[1]}function a(t){t&&console.log("Error while loading:",t)}function u(){h.load()}function s(){i(location.hash)}function l(){i(location.hash),window.onhashchange=s}function c(t){var e=null,n=t.split("?");return n.length>1&&(e=n[1]),e}function f(t){var e={};if(t&&"string"==typeof t)for(var n=t.split("&"),r=0;r<n.length;++r){var i=n[r],o=i.split("=");2===o.length&&(e[o[0]]=o[1])}return e}var h,d,p=t("./newdoc"),g=t("./spriglog"),v=t("./sprigot"),m=t("./sprigotclient_settings"),y=t("./legacy-store"),_=t("./is-legacy");e.exports={init:l,direct:i}},{"./is-legacy":12,"./legacy-store":13,"./newdoc":16,"./spriglog":24,"./sprigot":25,"./sprigotclient_settings":27}],7:[function(t,e,n){function r(){var t={expanderArrow:null,graph:null,textStuff:null,camera:null,sprigot:null};return t.init=function(t,e,n,r,i){this.graph=e,this.textStuff=n,this.camera=r,this.sprigot=i,this.expanderArrow=t.append("div").classed("divider",!0).append("svg").classed("arrowboard",!0).append("polygon").attr({id:"expanderArrow",fill:"rgba(0, 0, 64, 0.4)",stroke:"#E0EBFF","stroke-width":1,points:"0,0 32,24 0,48",transform:"translate(0, 0)"}),this.expanderArrow.on("click",this.toggleGraphExpansion.bind(this))},t.syncExpanderArrow=function(){var t=this.textStuff.pane.classed("collapsedPane"),e=t?36:6,n="translate("+e+", 0) ",r=t,i=!1;n+="scale("+(r?"-1":"1")+", "+(i?"-1":"1")+") ",this.expanderArrow.transition().duration(500).ease("linear").attr("transform",n).attr("stroke-opacity",.5).attr("stroke-width",2).transition().delay(501).duration(500).attr("stroke-opacity",.15).attr("stroke-width",1)},t.toggleGraphExpansion=function(){var t=this.textStuff.pane.classed("collapsedPane"),e=!t;this.textStuff.pane.classed("collapsedPane",e).classed("pane",!e),this.graph.pane.classed("expandedPane",e).classed("pane",!e),this.textStuff.findUnreadLink.style("display",e?"none":"block"),this.syncExpanderArrow(),this.graph.focusEl&&this.camera.panToElement(d3.select(this.graph.focusEl))},t.hideGraph=function(){this.graph.pane.classed("expandedPane",!1),this.graph.pane.classed("collapsedPane",!0)},t}e.exports=r},{}],8:[function(t,e,n){function r(t){return i(t)?o:a()}var i=t("./is-legacy"),o=t("./legacy-store"),a=t("./store");e.exports=r},{"./is-legacy":12,"./legacy-store":13,"./store":28}],9:[function(t,e,n){function r(){var t={camera:null,treeRenderer:null,treeNav:null,textStuff:null,historian:null,sprigot:null,pane:null,board:null,svgRoot:null,focusEl:null,focusNode:null,nodeRoot:null,collisionFinder:null,margin:{top:20,right:10,bottom:20,left:10}};return t.init=function(t,e,n,r,a,u){this.camera=e,this.treeRenderer=n,this.treeNav=o(),this.textStuff=r,this.historian=a,this.sprigot=u,this.pane=t.append("div").attr("id","graphPane").classed("pane",!0),this.board=this.pane.append("svg").attr({id:"svgBoard"}),this.board.append("g").attr("id","background").append("rect").attr({width:"100%",height:"100%",fill:"rgba(0, 0, 16, 0.2)"}),this.svgRoot=this.board.append("g").attr({id:"graphRoot",transform:"translate("+this.margin.left+","+this.margin.top+")"}),this.camera.setUpZoomOnBoard(this.board,this.svgRoot),this.setGraphScale();var s=this.pane.append("div").attr("id","zoom-note").classed("info-note",!0);return s.text(this.sprigot.isMobile()?"You can pinch to zoom in and out of the graph. Drag to pan.":"You can use the mouse wheel to zoom in and out of the graph. Drag to pan."),this.collisionFinder=i(this.board.node()),this},t.setUpFilters=function(){var t=this.board.append("defs").append("filter").attr({id:"text-glow",x:"-20%",y:"-20%",width:"140%",height:"140%"});t.append("feGaussianBlur").attr({"in":"SourceAlpha",stdDeviation:4,result:"blurOut"});var e=t.append("feComponentTransfer").attr({"in":"blurOut",result:"increaseOpacityOut"});e.append("feFuncA").attr({type:"gamma",exponent:.7,amplitude:.8});var n=t.append("feMerge");n.append("feMergeNode").attr("in","increaseOpacityOut"),n.append("feMergeNode").attr("in","SourceGraphic")},t.loadNodeTreeToGraph=function(t,e,n){this.nodeRoot=t,this.treeRenderer.init(this.nodeRoot,this),this.treeNav.init(this.nodeRoot,this.camera,a,this,this.textStuff);var r=this.board.node().clientHeight-this.margin.top-this.margin.bottom;this.nodeRoot.x0=r/2,this.nodeRoot.y0=0,this.treeNav.collapseRecursively(this.nodeRoot);var i=this.nodeRoot;this.treeRenderer.update(this.nodeRoot);var o=!0;if(e){var s=u.mapPathInD3Tree(e,this.nodeRoot,100);s.length>0&&(this.treeNav.followPathToSprig(s),i=s[s.length-1],o=!1)}o&&setTimeout(function(){this.panToRoot(),this.focusNode&&this.historian.syncURLToSprigId(this.focusNode.id)}.bind(this),900),setTimeout(function(){this.noteNodeWasVisited(i),this.textStuff.initialShow(i),n()}.bind(this),800)},t.panToRoot=function(){var t=s.select("#"+this.nodeRoot.id);this.setFocusEl(t.node()),this.camera.panToElement(t)},t.setGraphScale=function(){var t=this.camera.getActualHeight(this.board.node());230>=t&&(this.camera.rootSelection.attr("transform","translate(0, 0) scale(0.75)"),this.camera.zoomBehavior.scale(.5))},t.setFocusEl=function(t){this.focusEl=t,this.focusNode=s.select(this.focusEl).datum()},t.focusOnTreeNode=function(t,e,n){this.setFocusEl(e);var r=this.noteNodeWasVisited(t);r||this.noteNodeWasVisited(t),this.historian.syncURLToSprigId(t.id),this.treeRenderer.update(this.nodeRoot),this.camera.panToElement(s.select(this.focusEl),n)},t.focusOnSprig=function(t,e,n){e||(e=500);var r=s.select("#"+t);setTimeout(function(){this.focusOnTreeNode(r.datum(),r.node(),n)}.bind(this),e)},t.nodeHasFocus=function(t){return t===this.focusNode},t.noteNodeWasVisited=function(t){var e="visited_"+t.id;localStorage[e]=!0},t.nodeWasVisited=function(t){var e="visited_"+t.id;return e in localStorage},t.nodeIsUnvisited=function(t){return!this.nodeWasVisited(t)},t.documentIsEditable=function(){return this.textStuff.editAvailable},t.nodeWasDragged=function(t,e){function n(e){return"object"==typeof e.__data__&&"string"==typeof e.__data__.id&&e.__data__.id!==t.id}if(this.documentIsEditable()){var r=this.collisionFinder.elementsHittingEl(e);console.log("collidingEls",r);var i=l.find(r,n);i&&(this.sprigot.metaPressed?this.swapNodeTreePositions(t,i.__data__):this.moveNodeToNewParent(t,i.__data__))}},t.swapNodeWithSibling=function(t,e){if("object"==typeof t.parent&&"object"==typeof t.parent.children){var n=l.indexOf(t.parent.children,t),r=n+e;if(r>-1&&r<t.parent.children.length){var i=t.parent.children[r];t.parent.children[n]=i,t.parent.children[r]=t,this.sprigot.store.saveSprigFromTreeNode(t.parent,t.parent.doc)}}},t.swapNodeTreePositions=function(t,e){"object"==typeof t.parent&&"object"==typeof e.parent&&("object"!=typeof t.parent.children&&(t.parent.children=[]),t.parent.children[t.parent.children.indexOf(t)]=e,"object"!=typeof e.parent.children&&(e.parent.children=[]),e.parent.children[e.parent.children.indexOf(e)]=t,this.treeRenderer.update(this.nodeRoot),this.sprigot.store.saveSprigFromTreeNode(t.parent,t.parent.doc),this.sprigot.store.saveSprigFromTreeNode(e.parent,e.parent.doc))},t.moveNodeToNewParent=function(t,e){if(t.parent.id!==e.id){if("object"==typeof t.parent){var n=t.parent.children;n||(n=t.parent._children),"object"==typeof n&&n.splice(n.indexOf(t),1)}var r=e.children;r||(r=e._children),r&&"object"==typeof r||(e.children=[],r=e.children),r.push(t);var i=t.parent;t.parent=e,this.treeRenderer.update(this.nodeRoot),this.sprigot.store.saveSprigFromTreeNode(e,e.doc),this.sprigot.store.saveSprigFromTreeNode(i,i.doc)}},t}var i=t("./collisionfinder"),o=t("./treenav"),a=t("./treerenderer"),u=t("./d3sprigbridge"),s=t("./lib/d3-small"),l=t("lodash");e.exports=r},{"./collisionfinder":3,"./d3sprigbridge":5,"./lib/d3-small":14,"./treenav":30,"./treerenderer":31,lodash:20}],10:[function(t,e,n){var r=t("./sprigotclient_settings"),i={docNav:null,docId:null};i.init=function(t,e){this.docNav=t,this.docId=e,window.onpopstate=this.statePopped.bind(this)},i.statePopped=function(t){t.state&&(this.docId=t.state.docId,this.docNav.goToSprigId(t.state.sprigId,100))},i.syncURLToSprigId=function(t){if("object"!=typeof window.history.state||!window.history.state||"string"!=typeof window.history.state.docId||"string"!=typeof window.history.state.sprigId||window.history.state.docId!==this.docId||window.history.state.sprigId!==t){var e=this.docId+"/";r.defaultDoc&&this.docId===r.defaultDoc&&(e="");var n=location.protocol+"//"+location.host+location.pathname+"#/"+e+t,i=location.hash.split("?");i.length>1&&(n+="?"+i[1]),window.history.pushState({docId:this.docId,sprigId:t},null,n)}},e.exports=i},{"./sprigotclient_settings":27}],11:[function(t,e,n){var r=t("./direct");console.log("hey guy"),r.init()},{"./direct":6}],12:[function(t,e,n){function r(t){return!0}e.exports=r},{}],13:[function(t,e,n){function r(t,e){function n(t,e){return t?void console.log("Error during saveSprigFromTreeNode:",t):void console.log(e)}var r=null;if(t&&(r=h.serializeTreedNode(t)),r){var i=f.randomId(4),o={};r.doc=e,o[i]={op:"saveSprig",params:r},d.request(o,n)}}function i(t,e){function n(t,e){return t?void console.log("Error while saving sprigs:",t):(console.log("Child sprig save status:",e.saveChildSprigOp.status),void console.log("Parent sprig save status:",e.saveParentSprigOp.status))}var r={};r.saveChildSprigOp={op:"saveSprig",params:t},r.saveParentSprigOp={op:"saveSprig",params:e},d.request(r,n)}function o(t,e){function n(t,e){return t?void console.log("Error while saving sprigs:",t):(console.log("Sprig deletion status:",e.deleteChildSprigOp.status),void console.log("Parent sprig save status:",e.saveParentSprigOp.status))}var r={};r.deleteChildSprigOp={op:"deleteSprig",params:t},r.saveParentSprigOp={op:"saveSprig",params:e},d.request(r,n)}function a(t,e){function n(t,n){return t?void(e&&e(t,null)):void("getDocReq"in n&&"got"===n.getDocReq.status?e&&e(null,n.getDocReq.result):e&&e(null,null))}var r={op:"getDoc",params:{id:t,childDepth:0}};d.request({getDocReq:r},n)}function u(t,e,n){function r(t,e){return t?void(n&&n(t,null)):void("getDocReq"in e&&"got"===e.getDocReq.status?n&&n(null,e.getDocReq.result.sprigTree):n&&n(null,null))}var i={op:"getDoc",params:{id:t,childDepth:40}};e&&(i.params.filterByFormat=e),d.request({getDocReq:i},r)}function s(t,e,n){function r(t,e){return t?void(n&&n(t,null)):void("getDocReq"in e&&"got"===e.getDocReq.status?n&&n(null,e.getDocReq.result.sprigList):n&&n(null,null))}var i={op:"getDoc",params:{id:t,flatten:!0}};e&&(i.params.filterByFormat=e),d.request({getDocReq:i},r)}function l(t,e,n){var r={},i="docCreateReq"+f.randomId(4),o="rootSprigSaveReq"+f.randomId(4);r[i]={op:"saveDoc",params:t},r[o]={op:"saveSprig",params:e},d.request(r,n)}var c=t("./apienvoy"),f=t("idmaker"),h=t("./d3sprigbridge"),d=c("http://192.241.250.38:3003");e.exports={saveSprigFromTreeNode:r,saveChildAndParentSprig:i,deleteChildAndSaveParentSprig:o,getDoc:a,getSprigTree:u,getSprigList:s,createNewDoc:l}},{"./apienvoy":1,"./d3sprigbridge":5,idmaker:19}],14:[function(t,e,n){!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function r(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=mn.length;r>n;++n){var i=mn[n]+e;if(i in t)return i}}function i(t){return vn(t,wn),t}function o(t){return"function"==typeof t?t:function(){return yn(t,this)}}function a(t){return"function"==typeof t?t:function(){return _n(t,this)}}function u(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function u(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=on.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?u:a:t.local?o:i}function s(t){return t.trim().replace(/\s+/g," ")}function l(t){return new RegExp("(?:^|\\s+)"+on.requote(t)+"(?:\\s+|$)","g")}function c(t){return(t+"").trim().split(/^|\s+/)}function f(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=c(t).map(h);var i=t.length;return"function"==typeof e?r:n}function h(t){var e=l(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",s(i+" "+t))):n.setAttribute("class",s(i.replace(e," ")))}}function d(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function p(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function g(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=on.ns.qualify(t)).local?n:e}function v(){var t=this.parentNode;t&&t.removeChild(this)}function m(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function y(){this._=Object.create(null)}function _(t){return(t+="")===Tn||t[0]===kn?kn+t:t}function b(t){return(t+="")[0]===kn?t.slice(1):t}function w(t){return _(t)in this._}function x(t){return(t=_(t))in this._&&delete this._[t]}function S(){var t=[];for(var e in this._)t.push(b(e));return t}function T(){var t=0;for(var e in this._)++t;return t}function k(){for(var t in this._)return!1;return!0}function N(){this._=Object.create(null)}function A(t){return{__data__:t}}function M(t){return function(){return bn(this,t)}}function C(t,e){return e>t?-1:t>e?1:t>=e?0:0/0}function R(t){return arguments.length||(t=C),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function D(){}function E(){}function F(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new y;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function I(){on.event.preventDefault()}function O(){for(var t,e=on.event;t=e.sourceEvent;)e=t;return e}function P(t){for(var e=new E,n=0,r=arguments.length;++n<r;)e[arguments[n]]=F(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=on.event;i.target=t,on.event=i,e[i.type].apply(n,r)}finally{on.event=o}}},e}function j(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=s(e,un(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+on.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var a="__on"+t,u=t.indexOf("."),s=U;u>0&&(t=t.slice(0,u));var l=Nn.get(t);return l&&(t=l,s=z),u?e?i:r:e?D:o}function U(t,e){return function(n){var r=on.event;on.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{on.event=r}}}function z(t,e){var n=U(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function L(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,u=o.length;u>a;a++)(i=o[a])&&e(i,a,n);return t}function q(t){return vn(t,An),t}function K(t){var e,n;return function(r,i,o){var a,u=t[o].update,s=u.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=u[e])&&++e<s;);return a}}function W(){return!0}function B(){var t=Z(),e=Y()-t;e>24?(isFinite(e)&&(clearTimeout(Dn),Dn=setTimeout(B,e)),Rn=0):(Rn=1,Fn(B))}function Z(){var t=Date.now();for(En=Mn;En;)t>=En.t&&(En.f=En.c(t-En.t)),En=En.n;return t}function Y(){for(var t,e=Mn,n=1/0;e;)e.f?e=t?t.n=e.n:Mn=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return Cn=t,n}function H(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function G(t,e,n){return vn(t,jn),t.namespace=e,t.id=n,t}function V(){}function $(t,e,n){return this instanceof $?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof $?new $(t.h,t.s,t.l):ht(""+t,dt,$):new $(t,e,n)}function X(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new lt(i(t+120),i(t),i(t-120))}function J(t){return((t=Math.exp(t))-1/t)/2}function Q(t){return((t=Math.exp(t))+1/t)/2}function tt(t){return((t=Math.exp(2*t))-1)/(t+1)}function et(t,e,n){return this instanceof et?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof et?new et(t.h,t.c,t.l):t instanceof rt?ot(t.l,t.a,t.b):ot((t=pt((t=on.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new et(t,e,n)}function nt(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new rt(n,Math.cos(t*=Wn)*e,Math.sin(t)*e)}function rt(t,e,n){return this instanceof rt?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof rt?new rt(t.l,t.a,t.b):t instanceof et?nt(t.h,t.c,t.l):pt((t=lt(t)).r,t.g,t.b):new rt(t,e,n)}function it(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=at(i)*Hn,r=at(r)*Gn,o=at(o)*Vn,new lt(st(3.2404542*i-1.5371385*r-.4985314*o),st(-.969266*i+1.8760108*r+.041556*o),st(.0556434*i-.2040259*r+1.0572252*o))}function ot(t,e,n){return t>0?new et(Math.atan2(n,e)*Bn,Math.sqrt(e*e+n*n),t):new et(0/0,0/0,t)}function at(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function ut(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function st(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function lt(t,e,n){return this instanceof lt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof lt?new lt(t.r,t.g,t.b):ht(""+t,lt,X):new lt(t,e,n)}function ct(t){return new lt(t>>16,t>>8&255,255&t)}function ft(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ht(t,e,n){var r,i,o,a=0,u=0,s=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(vt(i[0]),vt(i[1]),vt(i[2]))}return(o=Jn.get(t.toLowerCase()))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,u=240&o,u=u>>4|u,s=15&o,s=s<<4|s):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,s=255&o)),e(a,u,s))}function dt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),u=a-o,s=(a+o)/2;return u?(i=.5>s?u/(a+o):u/(2-a-o),r=t==a?(e-n)/u+(n>e?6:0):e==a?(n-t)/u+2:(t-e)/u+4,r*=60):(r=0/0,i=s>0&&1>s?0:r),new $(r,i,s)}function pt(t,e,n){t=gt(t),e=gt(e),n=gt(n);var r=ut((.4124564*t+.3575761*e+.1804375*n)/Hn),i=ut((.2126729*t+.7151522*e+.072175*n)/Gn),o=ut((.0193339*t+.119192*e+.9503041*n)/Vn);return rt(116*i-16,500*(r-i),200*(i-o))}function gt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vt(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function mt(t,e){t=on.rgb(t),e=on.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,u=e.b-i;return function(t){return"#"+ft(Math.round(n+o*t))+ft(Math.round(r+a*t))+ft(Math.round(i+u*t))}}function yt(t,e){var n,r={},i={};for(n in t)n in e?r[n]=xt(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function _t(t,e){var n,r=[],i=[],o=t.length,a=e.length,u=Math.min(t.length,e.length);for(n=0;u>n;++n)r.push(xt(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;u>n;++n)i[n]=r[n](t);return i}}function bt(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function wt(t,e){var n,r,i,o=Qn.lastIndex=tr.lastIndex=0,a=-1,u=[],s=[];for(t+="",e+="";(n=Qn.exec(t))&&(r=tr.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,s.push({i:a,x:bt(n,r)})),o=tr.lastIndex;return o<e.length&&(i=e.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?s[0]?(e=s[0].x,function(t){return e(t)+""}):function(){return e}:(e=s.length,function(t){for(var n,r=0;e>r;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}function xt(t,e){for(var n,r=on.interpolators.length;--r>=0&&!(n=on.interpolators[r](t,e)););return n}function St(t){var e=[t.a,t.b],n=[t.c,t.d],r=kt(e),i=Tt(e,n),o=kt(Nt(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Bn,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Bn:0}function Tt(t,e){return t[0]*e[0]+t[1]*e[1]}function kt(t){var e=Math.sqrt(Tt(t,t));return e&&(t[0]/=e,t[1]/=e),e}function Nt(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function At(t,e){var n,r=[],i=[],o=on.transform(t),a=on.transform(e),u=o.translate,s=a.translate,l=o.rotate,c=a.rotate,f=o.skew,h=a.skew,d=o.scale,p=a.scale;return u[0]!=s[0]||u[1]!=s[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:bt(u[0],s[0])},{i:3,x:bt(u[1],s[1])})):r.push(s[0]||s[1]?"translate("+s+")":""),l!=c?(l-c>180?c+=360:c-l>180&&(l+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:bt(l,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:bt(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),d[0]!=p[0]||d[1]!=p[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:bt(d[0],p[0])},{i:n-2,x:bt(d[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),n=i.length,function(t){for(var e,o=-1;++o<n;)r[(e=i[o]).i]=e.x(t);return r.join("")}}function Mt(t,e,n,r){var i=t.id,o=t.namespace;return L(t,"function"==typeof n?function(t,a,u){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,u)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Ct(t){return null==t&&(t=""),function(){this.textContent=t}}function Rt(t){return t}function Dt(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function Et(t){return function(e){return 1-t(1-e)}}function Ft(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function It(t){return t*t}function Ot(t){return t*t*t}function Pt(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function jt(t){return function(e){return Math.pow(e,t)}}function Ut(t){return 1-Math.cos(t*Kn)}function zt(t){return Math.pow(2,10*(t-1))}function Lt(t){return 1-Math.sqrt(1-t*t)}function qt(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/qn*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*qn/e)}}function Kt(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Wt(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Bt(t){return null==t?"__transition__":"__transition_"+t+"__"}function Zt(t,e,n,r,i){var o=t[n]||(t[n]={active:0,count:0}),a=o[r];if(!a){var u=i.time;a=o[r]={tween:new y,time:u,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++o.count,on.timer(function(i){function s(n){if(o.active>r)return c();var i=o[o.active];i&&(--o.count,delete o[o.active],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),o.active=r,a.event&&a.event.start.call(t,t.__data__,e),a.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&g.push(r)}),h=a.ease,f=a.duration,on.timer(function(){return p.c=l(n||1)?W:l,1},0,u)}function l(n){if(o.active!==r)return 1;for(var i=n/f,u=h(i),s=g.length;s>0;)g[--s].call(t,u);return i>=1?(a.event&&a.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--o.count?delete o[r]:delete t[n],1}var f,h,d=a.delay,p=En,g=[];return p.t=d+u,
i>=d?s(i-d):void(p.c=s)},0,u)}}function Yt(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>or){var o=n(t);if(o.scrollX||o.scrollY){r=on.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();or=!(a.f||a.e),r.remove()}}return or?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]}function Ht(t){for(var e=1;t*e%1;)e*=10;return e}function Gt(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function Vt(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function $t(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function Xt(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Jt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function Qt(t,e){var n=Math.pow(10,3*ar(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function te(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,u=r[0],s=0;i>0&&u>0&&(s+u+1>e&&(u=Math.max(1,e-s)),o.push(t.substring(i-=u,i+u)),!((s+=u+1)>e));)u=r[a=(a+1)%r.length];return o.reverse().join(n)}:Rt;return function(t){var n=sr.exec(t),r=n[1]||" ",a=n[2]||">",u=n[3]||"-",s=n[4]||"",l=n[5],c=+n[6],f=n[7],h=n[8],d=n[9],p=1,g="",v="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(l||"0"===r&&"="===a)&&(l=r="0",a="="),d){case"n":f=!0,d="g";break;case"%":p=100,v="%",d="f";break;case"p":p=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===s&&(g="0"+d.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,d="r"}"$"===s&&(g=i[0],v=i[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=lr.get(d)||ee;var _=l&&f;return function(t){var n=v;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===u?"":u;if(0>p){var s=on.formatPrefix(t,h);t=s.scale(t),n=s.symbol+v}else t*=p;t=d(t,h);var b,w,x=t.lastIndexOf(".");if(0>x){var S=y?t.lastIndexOf("e"):-1;0>S?(b=t,w=""):(b=t.substring(0,S),w=t.substring(S))}else b=t.substring(0,x),w=e+t.substring(x+1);!l&&f&&(b=o(b,1/0));var T=g.length+b.length+w.length+(_?0:i.length),k=c>T?new Array(T=c-T+1).join(r):"";return _&&(b=o(k+b,k.length?c-w.length:1/0)),i+=g,t=b+w,("<"===a?i+t+k:">"===a?k+i+t:"^"===a?k.substring(0,T>>=1)+i+t+k.substring(T):i+(_?t:k+t))+n}}}function ee(t){return t+""}function ne(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function re(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new fr(n-1)),1),n}function o(t,n){return e(t=new fr(+t),n),t}function a(t,r,o){var a=i(t),u=[];if(o>1)for(;r>a;)n(a)%o||u.push(new Date(+a)),e(a,1);else for(;r>a;)u.push(new Date(+a)),e(a,1);return u}function u(t,e,n){try{fr=ne;var r=new ne;return r._=t,a(r,e,n)}finally{fr=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var s=t.utc=ie(t);return s.floor=s,s.round=ie(r),s.ceil=ie(i),s.offset=ie(o),s.range=u,t}function ie(t){return function(e,n){try{fr=ne;var r=new ne;return r._=e,t(r,n)._}finally{fr=Date}}}function oe(t){function e(t){function e(e){for(var n,i,o,a=[],u=-1,s=0;++u<r;)37===t.charCodeAt(u)&&(a.push(t.slice(s,u)),null!=(i=dr[n=t.charAt(++u)])&&(n=t.charAt(++u)),(o=M[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),s=u+1);return a.push(t.slice(s,u)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&fr!==ne,a=new(o?ne:fr);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,u=0,s=e.length,l=n.length;s>u;){if(r>=l)return-1;if(i=e.charCodeAt(u++),37===i){if(a=e.charAt(u++),o=C[a in dr?e.charAt(u++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){x.lastIndex=0;var r=x.exec(e.slice(n));return r?(t.w=S.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){b.lastIndex=0;var r=b.exec(e.slice(n));return r?(t.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){N.lastIndex=0;var r=N.exec(e.slice(n));return r?(t.m=A.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){T.lastIndex=0;var r=T.exec(e.slice(n));return r?(t.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function u(t,e,r){return n(t,M.c.toString(),e,r)}function s(t,e,r){return n(t,M.x.toString(),e,r)}function l(t,e,r){return n(t,M.X.toString(),e,r)}function c(t,e,n){var r=_.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,h=t.date,d=t.time,p=t.periods,g=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{fr=ne;var e=new fr;return e._=t,r(e)}finally{fr=Date}}var r=e(t);return n.parse=function(t){try{fr=ne;var e=r.parse(t);return e&&e._}finally{fr=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=ke;var _=on.map(),b=ue(g),w=se(g),x=ue(v),S=se(v),T=ue(m),k=se(m),N=ue(y),A=se(y);p.forEach(function(t,e){_.set(t.toLowerCase(),e)});var M={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(f),d:function(t,e){return ae(t.getDate(),e,2)},e:function(t,e){return ae(t.getDate(),e,2)},H:function(t,e){return ae(t.getHours(),e,2)},I:function(t,e){return ae(t.getHours()%12||12,e,2)},j:function(t,e){return ae(1+cr.dayOfYear(t),e,3)},L:function(t,e){return ae(t.getMilliseconds(),e,3)},m:function(t,e){return ae(t.getMonth()+1,e,2)},M:function(t,e){return ae(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return ae(t.getSeconds(),e,2)},U:function(t,e){return ae(cr.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return ae(cr.mondayOfYear(t),e,2)},x:e(h),X:e(d),y:function(t,e){return ae(t.getFullYear()%100,e,2)},Y:function(t,e){return ae(t.getFullYear()%1e4,e,4)},Z:Se,"%":function(){return"%"}},C={a:r,A:i,b:o,B:a,c:u,d:me,e:me,H:_e,I:_e,j:ye,L:xe,m:ve,M:be,p:c,S:we,U:ce,w:le,W:fe,x:s,X:l,y:de,Y:he,Z:pe,"%":Te};return e}function ae(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function ue(t){return new RegExp("^(?:"+t.map(on.requote).join("|")+")","i")}function se(t){for(var e=new y,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function le(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ce(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function fe(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function he(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function de(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+2));return r?(t.y=ge(+r[0]),n+r[0].length):-1}function pe(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function ge(t){return t+(t>68?1900:2e3)}function ve(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function me(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ye(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function _e(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function be(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function we(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function xe(t,e,n){pr.lastIndex=0;var r=pr.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Se(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=ar(e)/60|0,i=ar(e)%60;return n+ae(r,"0",2)+ae(i,"0",2)}function Te(t,e,n){gr.lastIndex=0;var r=gr.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function ke(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function Ne(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function Ae(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Me(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:mr}function Ce(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function Re(t,e,n,r){var i=[],o=[],a=0,u=Math.min(t.length,e.length)-1;for(t[u]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=u;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=on.bisect(t,e,1,u)-1;return o[n](i[n](e))}}function De(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function Ee(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Re:Ne,s=r?Xt:$t;return a=i(t,e,s,n),u=i(e,t,s,xt),o}function o(t){return a(t)}var a,u;return o.invert=function(t){return u(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(Vt)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Oe(t,e)},o.tickFormat=function(e,n){return Pe(t,e,n)},o.nice=function(e){return Fe(t,e),i()},o.copy=function(){return Ee(t,e,n,r)},i()}function Fe(t,e){return Ae(t,Me(Ie(t,e)[2]))}function Ie(t,e){null==e&&(e=10);var n=De(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Oe(t,e){return on.range.apply(on,Ie(t,e))}function Pe(t,e,n){var r=Ie(t,e);if(n){var i=sr.exec(n);if(i.shift(),"s"===i[8]){var o=on.formatPrefix(Math.max(ar(r[0]),ar(r[1])));return i[7]||(i[7]="."+je(o.scale(r[2]))),i[8]="f",n=on.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+Ue(i[8],r)),n=i.join("")}else n=",."+je(r[2])+"f";return on.format(n)}function je(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ue(t,e){var n=je(e[2]);return t in br?Math.abs(n-je(Math.max(ar(e[0]),ar(e[1]))))+ +("e"!==t):n-2*("%"===t)}function ze(e){var i=".dragsuppress-"+ ++wr,o="click"+i,a=on.select(n(e)).on("touchmove"+i,I).on("dragstart"+i,I).on("selectstart"+i,I);if(null==_r&&(_r="onselectstart"in e?!1:r(e.style,"userSelect")),_r){var u=t(e).style,s=u[_r];u[_r]="none"}return function(t){if(a.on(i,null),_r&&(u[_r]=s),t){var e=function(){a.on(o,null)};a.on(o,function(){I(),e()},!0),setTimeout(e,0)}}}function Le(){return on.event.changedTouches[0].identifier}function qe(t,e){return on.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=He,t}function Ke(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function We(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function Be(t){return t.children}function Ze(t){return t.value}function Ye(t,e){return e.value-t.value}function He(t){return on.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function Ge(t,e){return t.parent==e.parent?1:2}function Ve(t){var e=t.children;return e.length?e[0]:t.t}function $e(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Xe(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Je(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Qe(t,e,n){return t.a.parent===e.parent?t.a:n}function tn(t){return"function"==typeof t?t:function(){return t}}function en(t){return t.source}function nn(t){return t.target}function rn(t){return[t.x,t.y]}var on={version:"3.5.5"},an=[].slice,un=function(t){return an.call(t)},sn=this.document;if(sn)try{un(sn.documentElement.childNodes)[0].nodeType}catch(ln){un=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),sn)try{sn.createElement("DIV").style.setProperty("opacity",0,"")}catch(cn){var fn=this.Element.prototype,hn=fn.setAttribute,dn=fn.setAttributeNS,pn=this.CSSStyleDeclaration.prototype,gn=pn.setProperty;fn.setAttribute=function(t,e){hn.call(this,t,e+"")},fn.setAttributeNS=function(t,e,n){dn.call(this,t,e,n+"")},pn.setProperty=function(t,e,n){gn.call(this,t,e+"",n)}}var vn={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},mn=["webkit","ms","moz","Moz","o","O"],yn=function(t,e){return e.querySelector(t)},_n=function(t,e){return e.querySelectorAll(t)},bn=function(t,e){var n=t.matches||t[r(t,"matchesSelector")];return(bn=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(yn=function(t,e){return Sizzle(t,e)[0]||null},_n=Sizzle,bn=Sizzle.matchesSelector),on.selection=function(){return on.select(sn.documentElement)};var wn=on.selection.prototype=[];wn.select=function(t){var e,n,r,a,u=[];t=o(t);for(var s=-1,l=this.length;++s<l;){u.push(e=[]),e.parentNode=(r=this[s]).parentNode;for(var c=-1,f=r.length;++c<f;)(a=r[c])?(e.push(n=t.call(a,a.__data__,c,s)),n&&"__data__"in a&&(n.__data__=a.__data__)):e.push(null)}return i(u)},wn.selectAll=function(t){var e,n,r=[];t=a(t);for(var o=-1,u=this.length;++o<u;)for(var s=this[o],l=-1,c=s.length;++l<c;)(n=s[l])&&(r.push(e=un(t.call(n,n.__data__,l,o))),e.parentNode=n);return i(r)};var xn={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};on.ns={prefix:xn,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),xn.hasOwnProperty(n)?{space:xn[n],local:t}:t}},wn.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=on.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(u(e,t[e]));return this}return this.each(u(t,e))},on.requote=function(t){return t.replace(Sn,"\\$&")};var Sn=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;wn.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=c(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!l(t[i]).test(e))return!1;return!0}for(e in t)this.each(f(e,t[e]));return this}return this.each(f(t,e))},wn.style=function(t,e,r){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(e="");for(r in t)this.each(d(r,t[r],e));return this}if(2>i){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(d(t,e,r))},wn.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(p(e,t[e]));return this}return this.each(p(t,e))},wn.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},wn.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},wn.append=function(t){return t=g(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},wn.insert=function(t,e){return t=g(t),e=o(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},wn.remove=function(){return this.each(v)},on.map=function(t,e){var n=new y;if(t instanceof y)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var Tn="__proto__",kn="\x00";m(y,{has:w,get:function(t){return this._[_(t)]},set:function(t,e){return this._[_(t)]=e},remove:x,keys:S,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:b(e),value:this._[e]});return t},size:T,empty:k,forEach:function(t){for(var e in this._)t.call(this,b(e),this._[e])}}),on.set=function(t){var e=new N;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},m(N,{has:w,add:function(t){return this._[_(t+="")]=!0,t},remove:x,values:S,size:T,empty:k,forEach:function(t){for(var e in this._)t.call(this,b(e))}}),wn.data=function(t,e){function n(t,n){var r,i,o,a=t.length,u=n.length,f=Math.min(a,u),h=new Array(u),d=new Array(u),p=new Array(a);if(e){var g,v=new y,m=new Array(a);for(r=-1;++r<a;)v.has(g=e.call(i=t[r],i.__data__,r))?p[r]=i:v.set(g,i),m[r]=g;for(r=-1;++r<u;)(i=v.get(g=e.call(n,o=n[r],r)))?i!==!0&&(h[r]=i,i.__data__=o):d[r]=A(o),v.set(g,!0);for(r=-1;++r<a;)v.get(m[r])!==!0&&(p[r]=t[r])}else{for(r=-1;++r<f;)i=t[r],o=n[r],i?(i.__data__=o,h[r]=i):d[r]=A(o);for(;u>r;++r)d[r]=A(n[r]);for(;a>r;++r)p[r]=t[r]}d.update=h,d.parentNode=h.parentNode=p.parentNode=t.parentNode,s.push(d),l.push(h),c.push(p)}var r,o,a=-1,u=this.length;if(!arguments.length){for(t=new Array(u=(r=this[0]).length);++a<u;)(o=r[a])&&(t[a]=o.__data__);return t}var s=q([]),l=i([]),c=i([]);if("function"==typeof t)for(;++a<u;)n(r=this[a],t.call(r,r.parentNode.__data__,a));else for(;++a<u;)n(r=this[a],t);return l.enter=function(){return s},l.exit=function(){return c},l},wn.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},wn.filter=function(t){var e,n,r,o=[];"function"!=typeof t&&(t=M(t));for(var a=0,u=this.length;u>a;a++){o.push(e=[]),e.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s,a)&&e.push(r)}return i(o)},wn.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},on.ascending=C,wn.sort=function(t){t=R.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},on.dispatch=function(){for(var t=new E,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=F(t);return t},E.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},on.event=null,wn.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(j(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(j(t,e,n))};var Nn=on.map({mouseenter:"mouseover",mouseleave:"mouseout"});sn&&Nn.forEach(function(t){"on"+t in sn&&Nn.remove(t)}),wn.each=function(t){return L(this,function(e,n,r){t.call(e,e.__data__,n,r)})},wn.call=function(t){var e=un(arguments);return t.apply(e[0]=this,e),this},wn.empty=function(){return!this.node()},wn.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},wn.size=function(){var t=0;return L(this,function(){++t}),t};var An=[];on.selection.enter=q,on.selection.enter.prototype=An,An.append=wn.append,An.empty=wn.empty,An.node=wn.node,An.call=wn.call,An.size=wn.size,An.select=function(t){for(var e,n,r,o,a,u=[],s=-1,l=this.length;++s<l;){r=(o=this[s]).update,u.push(e=[]),e.parentNode=o.parentNode;for(var c=-1,f=o.length;++c<f;)(a=o[c])?(e.push(r[c]=n=t.call(o.parentNode,a.__data__,c,s)),n.__data__=a.__data__):e.push(null)}return i(u)},An.insert=function(t,e){return arguments.length<2&&(e=K(this)),wn.insert.call(this,t,e)},on.select=function(e){var n;return"string"==typeof e?(n=[yn(e,sn)],n.parentNode=sn.documentElement):(n=[e],n.parentNode=t(e)),i([n])},on.selectAll=function(t){var e;return"string"==typeof t?(e=un(_n(t,sn)),e.parentNode=sn.documentElement):(e=t,e.parentNode=null),i([e])};var Mn,Cn,Rn,Dn,En,Fn=this[r(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};on.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};Cn?Cn.n=o:Mn=o,Cn=o,Rn||(Dn=clearTimeout(Dn),Rn=1,Fn(B))},on.timer.flush=function(){Z(),Y()},wn.transition=function(t){for(var e,n,r=In||++Un,i=Bt(t),o=[],a=On||{time:Date.now(),ease:Pt,delay:0,duration:250},u=-1,s=this.length;++u<s;){o.push(e=[]);for(var l=this[u],c=-1,f=l.length;++c<f;)(n=l[c])&&Zt(n,c,i,r,a),e.push(n)}return G(o,i,r)},wn.interrupt=function(t){return this.each(null==t?Pn:H(Bt(t)))};var In,On,Pn=H(Bt()),jn=[],Un=0;jn.call=wn.call,jn.empty=wn.empty,jn.node=wn.node,jn.size=wn.size,on.transition=function(t,e){return t&&t.transition?In?t.transition(e):t:on.selection().transition(t)},on.transition.prototype=jn,jn.select=function(t){var e,n,r,i=this.id,a=this.namespace,u=[];t=o(t);for(var s=-1,l=this.length;++s<l;){u.push(e=[]);for(var c=this[s],f=-1,h=c.length;++f<h;)(r=c[f])&&(n=t.call(r,r.__data__,f,s))?("__data__"in r&&(n.__data__=r.__data__),Zt(n,f,a,i,r[a][i]),e.push(n)):e.push(null)}return G(u,a,i)},jn.selectAll=function(t){var e,n,r,i,o,u=this.id,s=this.namespace,l=[];t=a(t);for(var c=-1,f=this.length;++c<f;)for(var h=this[c],d=-1,p=h.length;++d<p;)if(r=h[d]){o=r[s][u],n=t.call(r,r.__data__,d,c),l.push(e=[]);for(var g=-1,v=n.length;++g<v;)(i=n[g])&&Zt(i,g,s,u,o),e.push(i)}return G(l,s,u)},jn.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=M(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var n=this[o],u=0,s=n.length;s>u;u++)(r=n[u])&&t.call(r,r.__data__,u,o)&&e.push(r)}return G(i,this.namespace,this.id)},on.color=V,V.prototype.toString=function(){return this.rgb()+""},on.hsl=$;var zn=$.prototype=new V;zn.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new $(this.h,this.s,this.l/t)},zn.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new $(this.h,this.s,t*this.l)},zn.rgb=function(){return X(this.h,this.s,this.l)};var Ln=Math.PI,qn=2*Ln,Kn=Ln/2,Wn=Ln/180,Bn=180/Ln;on.hcl=et;var Zn=et.prototype=new V;Zn.brighter=function(t){return new et(this.h,this.c,Math.min(100,this.l+Yn*(arguments.length?t:1)))},Zn.darker=function(t){return new et(this.h,this.c,Math.max(0,this.l-Yn*(arguments.length?t:1)))},Zn.rgb=function(){return nt(this.h,this.c,this.l).rgb()},on.lab=rt;var Yn=18,Hn=.95047,Gn=1,Vn=1.08883,$n=rt.prototype=new V;$n.brighter=function(t){return new rt(Math.min(100,this.l+Yn*(arguments.length?t:1)),this.a,this.b)},$n.darker=function(t){return new rt(Math.max(0,this.l-Yn*(arguments.length?t:1)),this.a,this.b)},$n.rgb=function(){return it(this.l,this.a,this.b)},on.rgb=lt;var Xn=lt.prototype=new V;Xn.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new lt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new lt(i,i,i)},Xn.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new lt(t*this.r,t*this.g,t*this.b)},Xn.hsl=function(){return dt(this.r,this.g,this.b)},Xn.toString=function(){return"#"+ft(this.r)+ft(this.g)+ft(this.b)};var Jn=on.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Jn.forEach(function(t,e){Jn.set(t,ct(e))}),on.interpolateRgb=mt,on.interpolateObject=yt,on.interpolateArray=_t,on.interpolateNumber=bt,on.interpolateString=wt;var Qn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,tr=new RegExp(Qn.source,"g");on.interpolate=xt,on.interpolators=[function(t,e){var n=typeof e;return("string"===n?Jn.has(e)||/^(#|rgb\(|hsl\()/.test(e)?mt:wt:e instanceof V?mt:Array.isArray(e)?_t:"object"===n&&isNaN(e)?yt:bt)(t,e)}],on.transform=function(t){var e=sn.createElementNS(on.ns.prefix.svg,"g");return(on.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new St(n?n.matrix:er)})(t)},St.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var er={a:1,b:0,c:0,d:1,e:0,f:0};on.interpolateTransform=At,jn.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):L(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},jn.attr=function(t,e){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(u);return n!==t&&(e=a(n,t),function(t){this.setAttribute(u,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(u.space,u.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(u.space,u.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?At:xt,u=on.ns.qualify(t);return Mt(this,"attr."+t,e,u.local?o:i)},jn.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=on.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},jn.style=function(t,e,r){function i(){this.style.removeProperty(t)}function o(e){return null==e?i:(e+="",function(){var i,o=n(this).getComputedStyle(this,null).getPropertyValue(t);return o!==e&&(i=xt(o,e),function(e){this.style.setProperty(t,i(e),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(e="");for(r in t)this.style(r,t[r],e);return this}r=""}return Mt(this,"style."+t,e,o)},jn.styleTween=function(t,e,r){function i(i,o){var a=e.call(this,i,o,n(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},jn.text=function(t){return Mt(this,"text",t,Ct)},jn.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})};var nr=function(){return Rt},rr=on.map({linear:nr,poly:jt,quad:function(){return It},cubic:function(){return Ot},sin:function(){return Ut},exp:function(){return zt},circle:function(){return Lt},elastic:qt,back:Kt,bounce:function(){return Wt}}),ir=on.map({"in":Rt,out:Et,"in-out":Ft,"out-in":function(t){return Ft(Et(t))}});on.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=rr.get(n)||nr,r=ir.get(r)||Rt,Dt(r(n.apply(null,an.call(arguments,1))))},jn.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=on.ease.apply(on,arguments)),L(this,function(r){r[n][e].ease=t}))},jn.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:L(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},jn.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:L(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},jn.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=On,o=In;try{In=n,L(this,function(e,i,o){On=e[r][n],t.call(e,e.__data__,i,o)})}finally{On=i,In=o}}else L(this,function(i){var o=i[r][n];(o.event||(o.event=on.dispatch("start","end","interrupt"))).on(t,e)});return this},jn.transition=function(){for(var t,e,n,r,i=this.id,o=++Un,a=this.namespace,u=[],s=0,l=this.length;l>s;s++){u.push(t=[]);for(var e=this[s],c=0,f=e.length;f>c;c++)(n=e[c])&&(r=n[a][i],Zt(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return G(u,a,o)},on.mouse=function(t){return Yt(t,O())};var or=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0,ar=Math.abs;on.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=Ht(ar(n)),a=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},on.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=Gt(t,e,e[n]);return t},on.interpolateRound=Vt,on.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var ur=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(Qt);on.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=on.round(t,Jt(t,e))),
n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ur[8+n/3]};var sr=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,lr=on.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=on.round(t,Jt(t,e))).toFixed(Math.max(0,Math.min(20,Jt(t*(1+1e-15),e))))}}),cr=on.time={},fr=Date;ne.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){hr.setUTCDate.apply(this._,arguments)},setDay:function(){hr.setUTCDay.apply(this._,arguments)},setFullYear:function(){hr.setUTCFullYear.apply(this._,arguments)},setHours:function(){hr.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){hr.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){hr.setUTCMinutes.apply(this._,arguments)},setMonth:function(){hr.setUTCMonth.apply(this._,arguments)},setSeconds:function(){hr.setUTCSeconds.apply(this._,arguments)},setTime:function(){hr.setTime.apply(this._,arguments)}};var hr=Date.prototype;cr.year=re(function(t){return t=cr.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),cr.years=cr.year.range,cr.years.utc=cr.year.utc.range,cr.day=re(function(t){var e=new fr(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),cr.days=cr.day.range,cr.days.utc=cr.day.utc.range,cr.dayOfYear=function(t){var e=cr.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=cr[t]=re(function(t){return(t=cr.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=cr.year(t).getDay();return Math.floor((cr.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});cr[t+"s"]=n.range,cr[t+"s"].utc=n.utc.range,cr[t+"OfYear"]=function(t){var n=cr.year(t).getDay();return Math.floor((cr.dayOfYear(t)+(n+e)%7)/7)}}),cr.week=cr.sunday,cr.weeks=cr.sunday.range,cr.weeks.utc=cr.sunday.utc.range,cr.weekOfYear=cr.sundayOfYear;var dr={"-":"",_:" ",0:"0"},pr=/^\s*\d+/,gr=/^%/;on.locale=function(t){return{numberFormat:te(t),timeFormat:oe(t)}};var vr=on.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});on.format=vr.numberFormat;var mr={floor:Rt,ceil:Rt},yr=Ce(C);on.bisectLeft=yr.left,on.bisect=on.bisectRight=yr.right,on.bisector=function(t){return Ce(1===t.length?function(e,n){return C(t(e),n)}:t)},on.scale={},on.scale.linear=function(){return Ee([0,1],[0,1],xt,!1)};var _r,br={s:1,g:1,p:1,r:1,e:1},wr=0;on.touches=function(t,e){return arguments.length<2&&(e=O().touches),e?un(e).map(function(e){var n=Yt(t,e);return n.identifier=e.identifier,n}):[]};var xr=Math.SQRT2,Sr=2,Tr=4;on.interpolateZoom=function(t,e){function n(t){var e=t*y;if(m){var n=Q(g),a=o/(Sr*h)*(n*tt(xr*e+g)-J(g));return[r+a*l,i+a*c,o*n/Q(xr*e+g)]}return[r+t*l,i+t*c,o*Math.exp(xr*e)]}var r=t[0],i=t[1],o=t[2],a=e[0],u=e[1],s=e[2],l=a-r,c=u-i,f=l*l+c*c,h=Math.sqrt(f),d=(s*s-o*o+Tr*f)/(2*o*Sr*h),p=(s*s-o*o-Tr*f)/(2*s*Sr*h),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(p*p+1)-p),m=v-g,y=(m||Math.log(s/o))/xr;return n.duration=1e3*y,n},on.behavior={},on.behavior.zoom=function(){function t(t){t.on(C,f).on(Nr+".zoom",d).on("dblclick.zoom",p).on(E,h)}function e(t){return[(t[0]-T.x)/T.k,(t[1]-T.y)/T.k]}function r(t){return[t[0]*T.k+T.x,t[1]*T.k+T.y]}function i(t){T.k=Math.max(N[0],Math.min(N[1],t))}function o(t,e){e=r(e),T.x+=t[0]-e[0],T.y+=t[1]-e[1]}function a(e,n,r,a){e.__chart__={x:T.x,y:T.y,k:T.k},i(Math.pow(2,a)),o(v=n,r),e=on.select(e),A>0&&(e=e.transition().duration(A)),e.call(t.event)}function u(){w&&w.domain(b.range().map(function(t){return(t-T.x)/T.k}).map(b.invert)),S&&S.domain(x.range().map(function(t){return(t-T.y)/T.k}).map(x.invert))}function s(t){M++||t({type:"zoomstart"})}function l(t){u(),t({type:"zoom",scale:T.k,translate:[T.x,T.y]})}function c(t){--M||t({type:"zoomend"}),v=null}function f(){function t(){f=1,o(on.mouse(i),d),l(u)}function r(){h.on(R,null).on(D,null),p(f&&on.event.target===a),c(u)}var i=this,a=on.event.target,u=F.of(i,arguments),f=0,h=on.select(n(i)).on(R,t).on(D,r),d=e(on.mouse(i)),p=ze(i);Pn.call(i),s(u)}function h(){function t(){var t=on.touches(p);return d=T.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=e(t))}),t}function n(){var e=on.event.target;on.select(e).on(b,r).on(w,u),x.push(e);for(var n=on.event.changedTouches,i=0,o=n.length;o>i;++i)v[n[i].identifier]=null;var s=t(),l=Date.now();if(1===s.length){if(500>l-_){var c=s[0];a(p,c,v[c.identifier],Math.floor(Math.log(T.k)/Math.LN2)+1),I()}_=l}else if(s.length>1){var c=s[0],f=s[1],h=c[0]-f[0],d=c[1]-f[1];m=h*h+d*d}}function r(){var t,e,n,r,a=on.touches(p);Pn.call(p);for(var u=0,s=a.length;s>u;++u,r=null)if(n=a[u],r=v[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],i(f*d)}_=null,o(t,e),l(g)}function u(){if(on.event.touches.length){for(var e=on.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var i in v)return void t()}on.selectAll(x).on(y,null),S.on(C,f).on(E,h),k(),c(g)}var d,p=this,g=F.of(p,arguments),v={},m=0,y=".zoom-"+on.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,x=[],S=on.select(p),k=ze(p);n(),s(g),S.on(C,null).on(E,n)}function d(){var t=F.of(this,arguments);y?clearTimeout(y):(g=e(v=m||on.mouse(this)),Pn.call(this),s(t)),y=setTimeout(function(){y=null,c(t)},50),I(),i(Math.pow(2,.002*kr())*T.k),o(v,g),l(t)}function p(){var t=on.mouse(this),n=Math.log(T.k)/Math.LN2;a(this,t,e(t),on.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}var g,v,m,y,_,b,w,x,S,T={x:0,y:0,k:1},k=[960,500],N=Ar,A=250,M=0,C="mousedown.zoom",R="mousemove.zoom",D="mouseup.zoom",E="touchstart.zoom",F=P(t,"zoomstart","zoom","zoomend");return Nr||(Nr="onwheel"in sn?(kr=function(){return-on.event.deltaY*(on.event.deltaMode?120:1)},"wheel"):"onmousewheel"in sn?(kr=function(){return on.event.wheelDelta},"mousewheel"):(kr=function(){return-on.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=F.of(this,arguments),e=T;In?on.select(this).transition().each("start.zoom",function(){T=this.__chart__||{x:0,y:0,k:1},s(t)}).tween("zoom:zoom",function(){var n=k[0],r=k[1],i=v?v[0]:n/2,o=v?v[1]:r/2,a=on.interpolateZoom([(i-T.x)/T.k,(o-T.y)/T.k,n/T.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),u=n/r[2];this.__chart__=T={x:i-r[0]*u,y:o-r[1]*u,k:u},l(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=T,s(t),l(t),c(t))})},t.translate=function(e){return arguments.length?(T={x:+e[0],y:+e[1],k:T.k},u(),t):[T.x,T.y]},t.scale=function(e){return arguments.length?(T={x:T.x,y:T.y,k:+e},u(),t):T.k},t.scaleExtent=function(e){return arguments.length?(N=null==e?Ar:[+e[0],+e[1]],t):N},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(k=e&&[+e[0],+e[1]],t):k},t.duration=function(e){return arguments.length?(A=+e,t):A},t.x=function(e){return arguments.length?(w=e,b=e.copy(),T={x:0,y:0,k:1},t):w},t.y=function(e){return arguments.length?(S=e,x=e.copy(),T={x:0,y:0,k:1},t):S},on.rebind(t,F,"on")};var kr,Nr,Ar=[0,1/0];on.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=O().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return Yt(t,r)},on.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function e(t,e,n,o,a){return function(){function u(){var t,n,r=e(h,g);r&&(t=r[0]-_[0],n=r[1]-_[1],p|=t|n,_=r,d({type:"drag",x:r[0]+l[0],y:r[1]+l[1],dx:t,dy:n}))}function s(){e(h,g)&&(m.on(o+v,null).on(a+v,null),y(p&&on.event.target===f),d({type:"dragend"}))}var l,c=this,f=on.event.target,h=c.parentNode,d=r.of(c,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=on.select(n(f)).on(o+v,u).on(a+v,s),y=ze(f),_=e(h,g);i?(l=i.apply(c,arguments),l=[l.x-_[0],l.y-_[1]]):l=[0,0],d({type:"dragstart"})}}var r=P(t,"drag","dragstart","dragend"),i=null,o=e(D,on.mouse,n,"mousemove","mouseup"),a=e(Le,on.touch,Rt,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},on.rebind(t,r,"on")},on.layout={},on.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n},on.layout.hierarchy=function(){function t(i){var o,a=[i],u=[];for(i.depth=0;null!=(o=a.pop());)if(u.push(o),(l=n.call(t,o,o.depth))&&(s=l.length)){for(var s,l,c;--s>=0;)a.push(c=l[s]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=l}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return We(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),u}var e=Ye,n=Be,r=Ze;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(Ke(e,function(t){t.children&&(t.value=0)}),We(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},on.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],h=e(f);if(We(h,n),h.parent.m=-h.z,Ke(h,r),l)Ke(f,o);else{var d=f,p=f,g=f;Ke(f,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var v=u(d,p)/2-d.x,m=s[0]/(p.x+u(p,d)/2+v),y=s[1]/(g.depth||1);Ke(f,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,u=o.length;u>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Je(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+u(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+u(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,a=e,s=i.parent.children[0],l=i.m,c=o.m,f=a.m,h=s.m;a=$e(a),i=Ve(i),a&&i;)s=Ve(s),o=$e(o),o.a=t,r=a.z+f-i.z-l+u(a._,i._),r>0&&(Xe(Qe(a,t,n),t,r),l+=r,c+=r),f+=a.m,l+=i.m,h+=s.m,c+=o.m;a&&!$e(o)&&(o.t=a,o.m+=f-c),i&&!Ve(s)&&(s.t=i,s.m+=l-h,n=t)}return n}function o(t){t.x*=s[0],t.y=t.depth*s[1]}var a=on.layout.hierarchy().sort(null).value(null),u=Ge,s=[1,1],l=null;return t.separation=function(e){return arguments.length?(u=e,t):u},t.size=function(e){return arguments.length?(l=null==(s=e)?o:null,t):l?null:s},t.nodeSize=function(e){return arguments.length?(l=null==(s=e)?null:o,t):l?s:null},qe(t,a)},on.functor=tn,on.svg={},on.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),u=(o.y+a.y)/2,s=[o,{x:o.x,y:u},{x:a.x,y:u},a];return s=s.map(r),"M"+s[0]+"C"+s[1]+" "+s[2]+" "+s[3]}var e=en,n=nn,r=rn;return t.source=function(n){return arguments.length?(e=tn(n),t):e},t.target=function(e){return arguments.length?(n=tn(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},"function"==typeof define&&define.amd?define(on):"object"==typeof e&&e.exports&&(e.exports=on),this.d3=on}()},{}],15:[function(t,e,n){function r(t,e){var n=d3.select("head"),r=!0,i=n.append("script").attr({type:"text/javascript",src:t}),o=i.node();o.async=!0,o.onload=function(){function t(){r&&(console.log("needToRunDone is true."),r=!1,clearTimeout(a),e())}try{console.log("Typekit is loading."),Typekit.load({active:t,inactive:t})}catch(n){}};var a=setTimeout(function(){r?(console.log("Moving on."),r=!1,e()):console.log("Typekit already loaded.")},1e3)}e.exports=r},{}],16:[function(t,e,n){function r(t){function e(e){t=t?t:{};var n=i(),r=n.setUpOuterContainer("form.css","form",t);return r?(d=s.select(".form"),void o("//use.typekit.net/med0yzx.js",e)):void e()}function n(){r([{title:"New Sprigot document",fields:[{id:"name",name:"Name",type:"text"},{id:"author",name:"Author",type:"text"},{id:"admin",name:"Admin",type:"text"},{id:"format",name:"Format",type:"select",options:["sprigot","bloge"]}],submit:{action:function(t){var e={id:t.name,rootSprig:u.randomId(8),authors:[t.author],admins:[t.author],format:t.format},n=(new Date).toJSON(),r={id:e.rootSprig,doc:e.id,title:t.name,body:"Hello. Type some stuff here.",children:[],created:n,modified:n};a.createNewDoc(e,r,function(t,n){t?console.log("Error while saving doc:",t):(console.log("Saved doc:",n),c.direct("#/"+e.id+"/"+r.id+"?forceRebuild=true"))})},name:"Make it!"}}]),setTimeout(function(){t.loadDone()},0)}function r(t){var e=d.selectAll(".sprig").data(t,l()),n=e.enter().append("div").classed("sprig",!0).classed("textpane",!0);n.append("div").classed("title",!0);var r=n.append("div").classed("sprigbody",!0);e.select(".title").text(function(t){return t.title});var i=e.exit();i.remove(),r.each(f),r.append("button").classed("submit-button",!0).text(function(t){return t.submit.name}).on("click",function(t){var e=h(this.parentElement,t.fields);t.submit.action(e)})}function f(t){var e=s.select(this).selectAll(".field-group").data(t.fields),n=e.enter().append("div").classed("field-group",!0);n.append("label").attr({id:function(t){return t.id+"_label"},"for":function(t){return t.id}}).text(function(t){return t.name}),n.append("input").attr("id",function(t){return t.id}),e.exit().remove()}function h(t,e){function n(t){r[t.id]=i.select("#"+t.id).node().value}var r={},i=s.select(t);return e.forEach(n),r}var d;return{init:e,load:n,newDocFormSel:d,controllerType:"form"}}var i=t("./sprigotbasemixin"),o=t("./load_a_typekit"),a=t("./legacy-store"),u=t("idmaker"),s=t("./lib/d3-small"),l=t("accessor"),c=t("./direct");e.exports=r},{"./direct":6,"./legacy-store":13,"./lib/d3-small":14,"./load_a_typekit":15,"./sprigotbasemixin":26,accessor:17,idmaker:19}],17:[function(t,e,n){function r(t){var e="id";return t&&"string"==typeof t&&(e=t),function(t){return t[e]}}"object"==typeof e&&"object"==typeof e.exports&&(e.exports=r)},{}],18:[function(t,e,n){function r(t){var e;return e=Array.isArray(t)?t:Array.prototype.slice.call(arguments),e.reduce(i,{})}function i(t,e){return t[e.name]=e,t}e.exports=r},{}],19:[function(t,e,n){function r(){function t(t){return t[~~(Math.random()*t.length)]}function e(e){for(var r="",i=0;e>i;++i)r+=t(n);return r}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");return{randomId:e}}"object"==typeof e&&"object"==typeof e.exports&&(e.exports=r())},{}],20:[function(t,e,n){(function(t){(function(){function r(t,e){if(t!==e){var n=t===t,r=e===e;if(t>e||!n||"undefined"==typeof t&&r)return 1;if(e>t||!r||"undefined"==typeof e&&n)return-1}return 0}function i(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function o(t,e,n){if(e!==e)return v(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function a(t){return"function"==typeof t||!1}function u(t){return"string"==typeof t?t:null==t?"":t+""}function s(t){return t.charCodeAt(0)}function l(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function c(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function f(t,e){return r(t.criteria,e.criteria)||t.index-e.index}function h(t,e,n){for(var i=-1,o=t.criteria,a=e.criteria,u=o.length,s=n.length;++i<u;){var l=r(o[i],a[i]);if(l)return i>=s?l:l*(n[i]?1:-1)}return t.index-e.index}function d(t){return qt[t]}function p(t){return Kt[t]}function g(t){return"\\"+Zt[t]}function v(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function m(t){return!!t&&"object"==typeof t}function y(t){return 160>=t&&t>=9&&13>=t||32==t||160==t||5760==t||6158==t||t>=8192&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function _(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=B,o[++i]=n);return o}function b(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var u=t[r],s=e?e(u,r,t):u;r&&n===s||(n=s,a[++o]=u)}return a}function w(t){for(var e=-1,n=t.length;++e<n&&y(t.charCodeAt(e)););return e}function x(t){for(var e=t.length;e--&&y(t.charCodeAt(e)););return e}function S(t){return Wt[t]}function T(t){function e(t){if(m(t)&&!au(t)&&!(t instanceof X)){if(t instanceof y)return t;if(Do.call(t,"__chain__")&&Do.call(t,"__wrapped__"))return Gn(t)}return new y(t)}function n(){}function y(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function X(t){this.__wrapped__=t,this.__actions__=null,this.__dir__=1,this.__dropCount__=0,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=ua,this.__views__=null}function et(){var t=this.__actions__,e=this.__iteratees__,n=this.__views__,r=new X(this.__wrapped__);return r.__actions__=t?$t(t):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=e?$t(e):null,r.__takeCount__=this.__takeCount__,r.__views__=n?$t(n):null,r}function rt(){if(this.__filtered__){var t=new X(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function qt(){var t=this.__wrapped__.value();if(!au(t))return He(t,this.__actions__);var e=this.__dir__,n=0>e,r=Dn(0,t.length,this.__views__),i=r.start,o=r.end,a=o-i,u=n?o:i-1,s=ea(a,this.__takeCount__),l=this.__iteratees__,c=l?l.length:0,f=0,h=[];t:for(;a--&&s>f;){u+=e;for(var d=-1,p=t[u];++d<c;){var g=l[d],v=g.iteratee,m=g.type;if(m==L){if(g.done&&(n?u>g.index:u<g.index)&&(g.count=0,g.done=!1),g.index=u,!g.done){var y=g.limit;if(!(g.done=y>-1?g.count++>=y:!v(p)))continue t}}else{var _=v(p);if(m==K)p=_;else if(!_){if(m==q)continue t;break t}}}h[f++]=p}return h}function Kt(){this.__data__={}}function Wt(t){return this.has(t)&&delete this.__data__[t]}function Bt(t){return"__proto__"==t?k:this.__data__[t]}function Zt(t){return"__proto__"!=t&&Do.call(this.__data__,t)}function Yt(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Ht(t){var e=t?t.length:0;for(this.data={hash:Xo(null),set:new Bo};e--;)this.push(t[e])}function Gt(t,e){var n=t.data,r="string"==typeof e||hi(e)?n.set.has(e):n.hash[e];return r?0:-1}function Vt(t){var e=this.data;"string"==typeof t||hi(t)?e.set.add(t):e.hash[t]=!0}function $t(t,e){var n=-1,r=t.length;for(e||(e=go(r));++n<r;)e[n]=t[n];return e}function Xt(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function te(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function ee(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ne(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function re(t,e){for(var n=-1,r=t.length,i=go(r);++n<r;)i[n]=e(t[n],n,t);return i}function ie(t){for(var e=-1,n=t.length,r=aa;++e<n;){var i=t[e];i>r&&(r=i)}return r}function oe(t){for(var e=-1,n=t.length,r=ua;++e<n;){var i=t[e];r>i&&(r=i)}return r}function ae(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function ue(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function se(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function le(t){for(var e=t.length,n=0;e--;)n+=+t[e]||0;return n}function ce(t,e){return"undefined"==typeof t?e:t}function fe(t,e,n,r){return"undefined"!=typeof t&&Do.call(r,n)?t:e}function he(t,e,n){var r=yu(e);if(!n)return pe(e,t,r);for(var i=-1,o=r.length;++i<o;){var a=r[i],u=t[a],s=n(u,e[a],a,t,e);(s===s?s===u:u!==u)&&("undefined"!=typeof u||a in t)||(t[a]=s)}return t}function de(t,e){for(var n=-1,r=t.length,i=Un(r),o=e.length,a=go(o);++n<o;){var u=e[n];i?(u=parseFloat(u),a[n]=On(u,r)?t[u]:k):a[n]=t[u]}return a}function pe(t,e,n){n||(n=e,e={});for(var r=-1,i=n.length;++r<i;){var o=n[r];e[o]=t[o]}return e}function ge(t,e,n){var r=typeof t;return"function"==r?"undefined"==typeof e?t:$e(t,e,n):null==t?eo:"object"==r?Ee(t):"undefined"==typeof e?Pe(t+""):Fe(t+"",e)}function ve(t,e,n,r,i,o,a){var u;if(n&&(u=i?n(t,r,i):n(t)),"undefined"!=typeof u)return u;if(!hi(t))return t;var s=au(t);if(s){if(u=En(t),!e)return $t(t,u)}else{var l=Fo.call(t),c=l==$;if(l!=Q&&l!=Z&&(!c||i))return zt[l]?In(t,l,e):i?t:{};if(u=Fn(c?{}:t),!e)return pe(t,u,yu(t))}o||(o=[]),a||(a=[]);for(var f=o.length;f--;)if(o[f]==t)return a[f];return o.push(t),a.push(u),(s?Xt:ke)(t,function(r,i){u[i]=ve(r,e,n,i,t,o,a)}),u}function me(t,e,n){if("function"!=typeof t)throw new To(W);return Zo(function(){t.apply(k,n)},e)}function ye(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,a=Rn(),u=a==o,s=u&&e.length>=200?xa(e):null,l=e.length;s&&(a=Gt,u=!1,e=s);t:for(;++i<n;){var c=t[i];if(u&&c===c){for(var f=l;f--;)if(e[f]===c)continue t;r.push(c)}else a(e,c,0)<0&&r.push(c)}return r}function _e(t,e){var n=!0;return ma(t,function(t,r,i){return n=!!e(t,r,i)}),n}function be(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r="undefined"==typeof r||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;i>n;)t[n++]=e;return t}function we(t,e){var n=[];return ma(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function xe(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function Se(t,e,n){for(var r=-1,i=t.length,o=-1,a=[];++r<i;){var u=t[r];if(m(u)&&Un(u.length)&&(au(u)||oi(u))){e&&(u=Se(u,e,n));var s=-1,l=u.length;for(a.length+=l;++s<l;)a[++o]=u[s]}else n||(a[++o]=u)}return a}function Te(t,e){return _a(t,e,Mi)}function ke(t,e){return _a(t,e,yu)}function Ne(t,e){return ba(t,e,yu)}function Ae(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];su(t[a])&&(o[++i]=a)}return o}function Me(t,e,n,r,i,o){if(t===e)return 0!==t||1/t==1/e;var a=typeof t,u=typeof e;return"function"!=a&&"object"!=a&&"function"!=u&&"object"!=u||null==t||null==e?t!==t&&e!==e:Ce(t,e,Me,n,r,i,o)}function Ce(t,e,n,r,i,o,a){var u=au(t),s=au(e),l=Y,c=Y;u||(l=Fo.call(t),l==Z?l=Q:l!=Q&&(u=bi(t))),s||(c=Fo.call(e),c==Z?c=Q:c!=Q&&(s=bi(e)));var f=l==Q||i&&l==$,h=c==Q||i&&c==$,d=l==c;if(d&&!u&&!f)return Nn(t,e,l);if(i){if(!(d||f&&h))return!1}else{var p=f&&Do.call(t,"__wrapped__"),g=h&&Do.call(e,"__wrapped__");if(p||g)return n(p?t.value():t,g?e.value():e,r,i,o,a);if(!d)return!1}o||(o=[]),a||(a=[]);for(var v=o.length;v--;)if(o[v]==t)return a[v]==e;o.push(t),a.push(e);var m=(u?kn:An)(t,e,n,r,i,o,a);return o.pop(),a.pop(),m}function Re(t,e,n,r,i){for(var o=-1,a=e.length,u=!i;++o<a;)if(u&&r[o]?n[o]!==t[e[o]]:!(e[o]in t))return!1;for(o=-1;++o<a;){var s=e[o],l=t[s],c=n[o];if(u&&r[o])var f="undefined"!=typeof l||s in t;else f=i?i(l,c,s):k,"undefined"==typeof f&&(f=Me(c,l,i,!0));if(!f)return!1}return!0}function De(t,e){var n=[];return ma(t,function(t,r,i){n.push(e(t,r,i))}),n}function Ee(t){var e=yu(t),n=e.length;if(!n)return to(!0);if(1==n){var r=e[0],i=t[r];if(zn(i))return function(t){return null!=t&&t[r]===i&&("undefined"!=typeof i||r in Hn(t))}}for(var o=go(n),a=go(n);n--;)i=t[e[n]],o[n]=i,a[n]=zn(i);return function(t){return null!=t&&Re(Hn(t),e,o,a)}}function Fe(t,e){return zn(e)?function(n){return null!=n&&n[t]===e&&("undefined"!=typeof e||t in Hn(n))}:function(n){return null!=n&&Me(e,n[t],null,!0)}}function Ie(t,e,n,r,i){if(!hi(t))return t;var o=Un(e.length)&&(au(e)||bi(e));return(o?Xt:ke)(e,function(e,a,u){if(m(e))return r||(r=[]),i||(i=[]),Oe(t,u,a,Ie,n,r,i);var s=t[a],l=n?n(s,e,a,t,u):k,c="undefined"==typeof l;c&&(l=e),!o&&"undefined"==typeof l||!c&&(l===l?l===s:s!==s)||(t[a]=l)}),t}function Oe(t,e,n,r,i,o,a){for(var u=o.length,s=e[n];u--;)if(o[u]==s)return void(t[n]=a[u]);var l=t[n],c=i?i(l,s,n,t,e):k,f="undefined"==typeof c;f&&(c=s,Un(s.length)&&(au(s)||bi(s))?c=au(l)?l:l&&l.length?$t(l):[]:lu(s)||oi(s)?c=oi(l)?Si(l):lu(l)?l:{}:f=!1),o.push(s),a.push(c),f?t[n]=r(c,s,i,o,a):(c===c?c!==l:l===l)&&(t[n]=c)}function Pe(t){return function(e){return null==e?k:e[t]}}function je(t,e){return t+Lo(oa()*(e-t+1))}function Ue(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function ze(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,0>e&&(e=-e>i?0:i+e),n="undefined"==typeof n||n>i?i:+n||0,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=go(i);++r<i;)o[r]=t[r+e];return o}function Le(t,e){var n;return ma(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function qe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Ke(t,e,n){var r=-1,i=t.length,o=Un(i)?go(i):[];return ma(t,function(t){for(var n=e.length,i=go(n);n--;)i[n]=null==t?k:t[e[n]];o[++r]={criteria:i,index:r,value:t}}),qe(o,function(t,e){return h(t,e,n)})}function We(t,e){var n=0;return ma(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Be(t,e){var n=-1,r=Rn(),i=t.length,a=r==o,u=a&&i>=200,s=u?xa():null,l=[];s?(r=Gt,a=!1):(u=!1,s=e?[]:l);t:for(;++n<i;){var c=t[n],f=e?e(c,n,t):c;if(a&&c===c){for(var h=s.length;h--;)if(s[h]===f)continue t;e&&s.push(f),l.push(c)}else r(s,f,0)<0&&((e||u)&&s.push(f),l.push(c))}return l}function Ze(t,e){for(var n=-1,r=e.length,i=go(r);++n<r;)i[n]=t[e[n]];return i}function Ye(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ze(t,r?0:o,r?o+1:i):ze(t,r?o+1:0,r?i:o)}function He(t,e){var n=t;n instanceof X&&(n=n.value());for(var r=-1,i=e.length;++r<i;){var o=[n],a=e[r];Ko.apply(o,a.args),n=a.func.apply(a.thisArg,o)}return n}function Ge(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&ca>=i){for(;i>r;){var o=r+i>>>1,a=t[o];(n?e>=a:e>a)?r=o+1:i=o}return i}return Ve(t,e,eo,n)}function Ve(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,u="undefined"==typeof e;o>i;){var s=Lo((i+o)/2),l=n(t[s]),c=l===l;if(a)var f=c||r;else f=u?c&&(r||"undefined"!=typeof l):r?e>=l:e>l;f?i=s+1:o=s}return ea(o,la)}function $e(t,e,n){if("function"!=typeof t)return eo;if("undefined"==typeof e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function Xe(t){return jo.call(t,0)}function Je(t,e,n){for(var r=n.length,i=-1,o=ta(t.length-r,0),a=-1,u=e.length,s=go(o+u);++a<u;)s[a]=e[a];for(;++i<r;)s[n[i]]=t[i];for(;o--;)s[a++]=t[i++];return s}function Qe(t,e,n){for(var r=-1,i=n.length,o=-1,a=ta(t.length-i,0),u=-1,s=e.length,l=go(a+s);++o<a;)l[o]=t[o];for(var c=o;++u<s;)l[c+u]=e[u];for(;++r<i;)l[c+n[r]]=t[o++];return l}function tn(t,e){return function(n,r,i){var o=e?e():{};if(r=Cn(r,i,3),au(n))for(var a=-1,u=n.length;++a<u;){var s=n[a];t(o,s,r(s,a,n),n)}else ma(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function en(t){return function(){var e=arguments,n=e.length,r=e[0];if(2>n||null==r)return r;var i=e[n-2],o=e[n-1],a=e[3];n>3&&"function"==typeof i?(i=$e(i,o,5),n-=2):(i=n>2&&"function"==typeof o?o:null,n-=i?1:0),a&&Pn(e[1],e[2],a)&&(i=3==n?null:i,n=2);for(var u=0;++u<n;){var s=e[u];s&&t(r,s,i)}return r}}function nn(t,e){return function(n,r){var i=n?n.length:0;if(!Un(i))return t(n,r);for(var o=e?i:-1,a=Hn(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function rn(t){return function(e,n,r){for(var i=Hn(e),o=r(e),a=o.length,u=t?a:-1;t?u--:++u<a;){var s=o[u];if(n(i[s],s,i)===!1)break}return e}}function on(t,e){function n(){var i=this&&this!==Jt&&this instanceof n?r:t;return i.apply(e,arguments)}var r=un(t);return n}function an(t){return function(e){for(var n=-1,r=Ji(Ui(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function un(t){return function(){var e=va(t.prototype),n=t.apply(e,arguments);return hi(n)?n:e}}function sn(t){function e(n,r,i){i&&Pn(n,r,i)&&(r=null);var o=Tn(n,t,null,null,null,null,null,r);return o.placeholder=e.placeholder,o}return e}function ln(t,e){return function(n,r,i){i&&Pn(n,r,i)&&(r=null);var o=Cn(),a=null==r;if(o===ge&&a||(a=!1,r=o(r,i,3)),a){var u=au(n);if(u||!_i(n))return t(u?n:Yn(n));r=s}return Mn(n,r,e)}}function cn(t,e){return function(n,r,o){if(r=Cn(r,o,3),au(n)){var a=i(n,r,e);return a>-1?n[a]:k}return xe(n,r,t)}}function fn(t){return function(e,n,r){return e&&e.length?(n=Cn(n,r,3),i(e,n,t)):-1}}function hn(t){return function(e,n,r){return n=Cn(n,r,3),xe(e,n,t,!0)}}function dn(t){return function(){var e=arguments.length;if(!e)return function(){return arguments[0]};for(var n,r=t?e:-1,i=0,o=go(e);t?r--:++r<e;){var a=o[i++]=arguments[r];if("function"!=typeof a)throw new To(W);var u=n?"":Ta(a);n="wrapper"==u?new y([]):n}for(r=n?-1:e;++r<e;){a=o[r],u=Ta(a);var s="wrapper"==u?Sa(a):null;n=s&&jn(s[0])?n[Ta(s[0])].apply(n,s[3]):1==a.length&&jn(a)?n[u]():n.thru(a)}return function(){var t=arguments;if(n&&1==t.length&&au(t[0]))return n.plant(t[0]).value();for(var r=0,i=o[r].apply(this,t);++r<e;)i=o[r].call(this,i);return i}}}function pn(t,e){return function(n,r,i){return"function"==typeof r&&"undefined"==typeof i&&au(n)?t(n,r):e(n,$e(r,i,3))}}function gn(t){return function(e,n,r){return("function"!=typeof n||"undefined"!=typeof r)&&(n=$e(n,r,3)),t(e,n,Mi)}}function vn(t){return function(e,n,r){return("function"!=typeof n||"undefined"!=typeof r)&&(n=$e(n,r,3)),t(e,n)}}function mn(t){return function(e,n,r){return e=u(e),e&&(t?e:"")+wn(e,n,r)+(t?"":e)}}function yn(t){var e=Qr(function(n,r){var i=_(r,e.placeholder);return Tn(n,t,null,r,i)});return e}function _n(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&"undefined"==typeof o&&au(n)?t(n,r,i,a):Ue(n,Cn(r,o,4),i,a,e)}}function bn(t,e,n,r,i,o,a,u,s,l){function c(){for(var b=arguments.length,w=b,x=go(b);w--;)x[w]=arguments[w];if(r&&(x=Je(x,r,i)),o&&(x=Qe(x,o,a)),p||v){var S=c.placeholder,T=_(x,S);if(b-=T.length,l>b){var N=u?$t(u):null,C=ta(l-b,0),R=p?T:null,D=p?null:T,I=p?x:null,O=p?null:x;e|=p?E:F,e&=~(p?F:E),g||(e&=~(A|M));var P=[t,e,n,I,R,O,D,N,s,C],j=bn.apply(k,P);return jn(t)&&ka(j,P),j.placeholder=S,j}}var U=h?n:this;d&&(t=U[y]),u&&(x=Wn(x,u)),f&&s<x.length&&(x.length=s);var z=this&&this!==Jt&&this instanceof c?m||un(t):t;return z.apply(U,x)}var f=e&I,h=e&A,d=e&M,p=e&R,g=e&C,v=e&D,m=!d&&un(t),y=t;return c}function wn(t,e,n){var r=t.length;if(e=+e,r>=e||!Jo(e))return"";var i=e-r;return n=null==n?" ":n+"",Bi(n,Uo(i/n.length)).slice(0,i)}function xn(t,e,n,r){function i(){for(var e=-1,u=arguments.length,s=-1,l=r.length,c=go(u+l);++s<l;)c[s]=r[s];for(;u--;)c[s++]=arguments[++e];var f=this&&this!==Jt&&this instanceof i?a:t;return f.apply(o?n:this,c)}var o=e&A,a=un(t);return i}function Sn(t){return function(e,n,r,i){var o=Cn(r);return o===ge&&null==r?Ge(e,n,t):Ve(e,n,o(r,i,1),t)}}function Tn(t,e,n,r,i,o,a,u){var s=e&M;if(!s&&"function"!=typeof t)throw new To(W);var l=r?r.length:0;if(l||(e&=~(E|F),r=i=null),l-=i?i.length:0,e&F){var c=r,f=i;r=i=null}var h=s?null:Sa(t),d=[t,e,n,r,i,c,f,o,a,u];if(h&&(Ln(d,h),e=d[1],u=d[9]),d[9]=null==u?s?0:t.length:ta(u-l,0)||0,e==A)var p=on(d[0],d[2]);else p=e!=E&&e!=(A|E)||d[4].length?bn.apply(k,d):xn.apply(k,d);var g=h?wa:ka;return g(p,d)}function kn(t,e,n,r,i,o,a){var u=-1,s=t.length,l=e.length,c=!0;if(s!=l&&!(i&&l>s))return!1;
for(;c&&++u<s;){var f=t[u],h=e[u];if(c=k,r&&(c=i?r(h,f,u):r(f,h,u)),"undefined"==typeof c)if(i)for(var d=l;d--&&(h=e[d],!(c=f&&f===h||n(f,h,r,i,o,a))););else c=f&&f===h||n(f,h,r,i,o,a)}return!!c}function Nn(t,e,n){switch(n){case H:case G:return+t==+e;case V:return t.name==e.name&&t.message==e.message;case J:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case tt:case nt:return t==e+""}return!1}function An(t,e,n,r,i,o,a){var u=yu(t),s=u.length,l=yu(e),c=l.length;if(s!=c&&!i)return!1;for(var f=i,h=-1;++h<s;){var d=u[h],p=i?d in e:Do.call(e,d);if(p){var g=t[d],v=e[d];p=k,r&&(p=i?r(v,g,d):r(g,v,d)),"undefined"==typeof p&&(p=g&&g===v||n(g,v,r,i,o,a))}if(!p)return!1;f||(f="constructor"==d)}if(!f){var m=t.constructor,y=e.constructor;if(m!=y&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof y&&y instanceof y))return!1}return!0}function Mn(t,e,n){var r=n?ua:aa,i=r,o=i;return ma(t,function(t,a,u){var s=e(t,a,u);((n?i>s:s>i)||s===r&&s===o)&&(i=s,o=t)}),o}function Cn(t,n,r){var i=e.callback||Qi;return i=i===Qi?ge:i,r?i(t,n,r):i}function Rn(t,n,r){var i=e.indexOf||or;return i=i===or?o:i,t?i(t,n,r):i}function Dn(t,e,n){for(var r=-1,i=n?n.length:0;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=ea(e,t+a);break;case"takeRight":t=ta(t,e-a)}}return{start:t,end:e}}function En(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Do.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Fn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=wo),new e}function In(t,e,n){var r=t.constructor;switch(e){case it:return Xe(t);case H:case G:return new r(+t);case ot:case at:case ut:case st:case lt:case ct:case ft:case ht:case dt:var i=t.buffer;return new r(n?Xe(i):i,t.byteOffset,t.length);case J:case nt:return new r(t);case tt:var o=new r(t.source,Nt.exec(t));o.lastIndex=t.lastIndex}return o}function On(t,e){return t=+t,e=null==e?ha:e,t>-1&&t%1==0&&e>t}function Pn(t,e,n){if(!hi(n))return!1;var r=typeof e;if("number"==r)var i=n.length,o=Un(i)&&On(e,i);else o="string"==r&&e in n;if(o){var a=n[e];return t===t?t===a:a!==a}return!1}function jn(t){var n=Ta(t);return!!n&&t===e[n]&&n in X.prototype}function Un(t){return"number"==typeof t&&t>-1&&t%1==0&&ha>=t}function zn(t){return t===t&&(0===t?1/t>0:!hi(t))}function Ln(t,e){var n=t[1],r=e[1],i=n|r,o=I>i,a=r==I&&n==R||r==I&&n==O&&t[7].length<=e[8]||r==(I|O)&&n==R;if(!o&&!a)return t;r&A&&(t[2]=e[2],i|=n&A?0:C);var u=e[3];if(u){var s=t[3];t[3]=s?Je(s,u,e[4]):$t(u),t[4]=s?_(t[3],B):$t(e[4])}return u=e[5],u&&(s=t[5],t[5]=s?Qe(s,u,e[6]):$t(u),t[6]=s?_(t[5],B):$t(e[6])),u=e[7],u&&(t[7]=$t(u)),r&I&&(t[8]=null==t[8]?e[8]:ea(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function qn(t,e){t=Hn(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function Kn(t,e){var n={};return Te(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function Wn(t,e){for(var n=t.length,r=ea(e.length,n),i=$t(t);r--;){var o=e[r];t[r]=On(o,n)?i[o]:k}return t}function Bn(t){{var n;e.support}if(!m(t)||Fo.call(t)!=Q||!Do.call(t,"constructor")&&(n=t.constructor,"function"==typeof n&&!(n instanceof n)))return!1;var r;return Te(t,function(t,e){r=e}),"undefined"==typeof r||Do.call(t,r)}function Zn(t){for(var n=Mi(t),r=n.length,i=r&&t.length,o=e.support,a=i&&Un(i)&&(au(t)||o.nonEnumArgs&&oi(t)),u=-1,s=[];++u<r;){var l=n[u];(a&&On(l,i)||Do.call(t,l))&&s.push(l)}return s}function Yn(t){return null==t?[]:Un(t.length)?hi(t)?t:wo(t):Fi(t)}function Hn(t){return hi(t)?t:wo(t)}function Gn(t){return t instanceof X?t.clone():new y(t.__wrapped__,t.__chain__,$t(t.__actions__))}function Vn(t,e,n){e=(n?Pn(t,e,n):null==e)?1:ta(+e||1,1);for(var r=0,i=t?t.length:0,o=-1,a=go(Uo(i/e));i>r;)a[++o]=ze(t,r,r+=e);return a}function $n(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function Xn(t,e,n){var r=t?t.length:0;return r?((n?Pn(t,e,n):null==e)&&(e=1),ze(t,0>e?0:e)):[]}function Jn(t,e,n){var r=t?t.length:0;return r?((n?Pn(t,e,n):null==e)&&(e=1),e=r-(+e||0),ze(t,0,0>e?0:e)):[]}function Qn(t,e,n){return t&&t.length?Ye(t,Cn(e,n,3),!0,!0):[]}function tr(t,e,n){return t&&t.length?Ye(t,Cn(e,n,3),!0):[]}function er(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Pn(t,e,n)&&(n=0,r=i),be(t,e,n,r)):[]}function nr(t){return t?t[0]:k}function rr(t,e,n){var r=t?t.length:0;return n&&Pn(t,e,n)&&(e=!1),r?Se(t,e):[]}function ir(t){var e=t?t.length:0;return e?Se(t,!0):[]}function or(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?ta(r+n,0):n;else if(n){var i=Ge(t,e),a=t[i];return(e===e?e===a:a!==a)?i:-1}return o(t,e,n||0)}function ar(t){return Jn(t,1)}function ur(){for(var t=[],e=-1,n=arguments.length,r=[],i=Rn(),a=i==o;++e<n;){var u=arguments[e];(au(u)||oi(u))&&(t.push(u),r.push(a&&u.length>=120?xa(e&&u):null))}n=t.length;var s=t[0],l=-1,c=s?s.length:0,f=[],h=r[0];t:for(;++l<c;)if(u=s[l],(h?Gt(h,u):i(f,u,0))<0){for(e=n;--e;){var d=r[e];if((d?Gt(d,u):i(t[e],u,0))<0)continue t}h&&h.push(u),f.push(u)}return f}function sr(t){var e=t?t.length:0;return e?t[e-1]:k}function lr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(0>n?ta(r+n,0):ea(n||0,r-1))+1;else if(n){i=Ge(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return v(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function cr(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Rn(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)Yo.call(e,o,1);return e}function fr(t,e,n){var r=-1,i=t?t.length:0,o=[];for(e=Cn(e,n,3);++r<i;){var a=t[r];e(a,r,t)&&(o.push(a),Yo.call(t,r--,1),i--)}return o}function hr(t){return Xn(t,1)}function dr(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Pn(t,e,n)&&(e=0,n=r),ze(t,e,n)):[]}function pr(t,e,n){var r=t?t.length:0;return r?((n?Pn(t,e,n):null==e)&&(e=1),ze(t,0,0>e?0:e)):[]}function gr(t,e,n){var r=t?t.length:0;return r?((n?Pn(t,e,n):null==e)&&(e=1),e=r-(+e||0),ze(t,0>e?0:e)):[]}function vr(t,e,n){return t&&t.length?Ye(t,Cn(e,n,3),!1,!0):[]}function mr(t,e,n){return t&&t.length?Ye(t,Cn(e,n,3)):[]}function yr(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Pn(t,e,r)?null:e,e=!1);var a=Cn();return(a!==ge||null!=n)&&(n=a(n,r,3)),e&&Rn()==o?b(t,n):Be(t,n)}function _r(t){for(var e=-1,n=(t&&t.length&&ie(re(t,Ro)))>>>0,r=go(n);++e<n;)r[e]=re(t,Pe(e));return r}function br(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(au(n)||oi(n))var r=r?ye(r,n).concat(ye(n,r)):n}return r?Be(r):[]}function wr(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||au(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function xr(t){var n=e(t);return n.__chain__=!0,n}function Sr(t,e,n){return e.call(n,t),t}function Tr(t,e,n){return e.call(n,t)}function kr(){return xr(this)}function Nr(){return new y(this.value(),this.__chain__)}function Ar(t){for(var e,r=this;r instanceof n;){var i=Gn(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Mr(){var t=this.__wrapped__;return t instanceof X?(this.__actions__.length&&(t=new X(this)),new y(t.reverse(),this.__chain__)):this.thru(function(t){return t.reverse()})}function Cr(){return this.value()+""}function Rr(){return He(this.__wrapped__,this.__actions__)}function Dr(t,e,n){var r=au(t)?ee:_e;return n&&Pn(t,e,n)&&(e=null),("function"!=typeof e||"undefined"!=typeof n)&&(e=Cn(e,n,3)),r(t,e)}function Er(t,e,n){var r=au(t)?ne:we;return e=Cn(e,n,3),r(t,e)}function Fr(t,e){return ja(t,Ee(e))}function Ir(t,e,n,r){var i=t?t.length:0;return Un(i)||(t=Fi(t),i=t.length),i?(n="number"!=typeof n||r&&Pn(e,n,r)?0:0>n?ta(i+n,0):n||0,"string"==typeof t||!au(t)&&_i(t)?i>n&&t.indexOf(e,n)>-1:Rn(t,e,n)>-1):!1}function Or(t,e,n){var r=au(t)?re:De;return e=Cn(e,n,3),r(t,e)}function Pr(t,e){return Or(t,Pe(e))}function jr(t,e,n){var r=au(t)?ne:we;return e=Cn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function Ur(t,e,n){if(n?Pn(t,e,n):null==e){t=Yn(t);var r=t.length;return r>0?t[je(0,r-1)]:k}var i=zr(t);return i.length=ea(0>e?0:+e||0,i.length),i}function zr(t){t=Yn(t);for(var e=-1,n=t.length,r=go(n);++e<n;){var i=je(0,e);e!=i&&(r[e]=r[i]),r[i]=t[e]}return r}function Lr(t){var e=t?t.length:0;return Un(e)?e:yu(t).length}function qr(t,e,n){var r=au(t)?se:Le;return n&&Pn(t,e,n)&&(e=null),("function"!=typeof e||"undefined"!=typeof n)&&(e=Cn(e,n,3)),r(t,e)}function Kr(t,e,n){if(null==t)return[];var r=-1,i=t.length,o=Un(i)?go(i):[];return n&&Pn(t,e,n)&&(e=null),e=Cn(e,n,3),ma(t,function(t,n,i){o[++r]={criteria:e(t,n,i),index:r,value:t}}),qe(o,f)}function Wr(){var t=arguments,e=t[0],n=t[3],r=0,i=t.length-1;if(null==e)return[];for(var o=go(i);i>r;)o[r]=t[++r];return n&&Pn(t[1],t[2],n)&&(o=t[1]),Ke(e,Se(o),[])}function Br(t,e,n,r){return null==t?[]:(r&&Pn(e,n,r)&&(n=null),au(e)||(e=null==e?[]:[e]),au(n)||(n=null==n?[]:[n]),Ke(t,e,n))}function Zr(t,e){return Er(t,Ee(e))}function Yr(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new To(W);var n=t;t=e,e=n}return t=Jo(t=+t)?t:0,function(){return--t<1?e.apply(this,arguments):void 0}}function Hr(t,e,n){return n&&Pn(t,e,n)&&(e=null),e=t&&null==e?t.length:ta(+e||0,0),Tn(t,I,null,null,null,null,e)}function Gr(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new To(W);var r=t;t=e,e=r}return function(){return--t>0?n=e.apply(this,arguments):e=null,n}}function Vr(t,e,n){function r(){h&&zo(h),s&&zo(s),s=h=d=k}function i(){var n=e-(Ha()-c);if(0>=n||n>e){s&&zo(s);var r=d;s=h=d=k,r&&(p=Ha(),l=t.apply(f,u),h||s||(u=f=null))}else h=Zo(i,n)}function o(){h&&zo(h),s=h=d=k,(v||g!==e)&&(p=Ha(),l=t.apply(f,u),h||s||(u=f=null))}function a(){if(u=arguments,c=Ha(),f=this,d=v&&(h||!m),g===!1)var n=m&&!h;else{s||m||(p=c);var r=g-(c-p),a=0>=r||r>g;a?(s&&(s=zo(s)),p=c,l=t.apply(f,u)):s||(s=Zo(o,r))}return a&&h?h=zo(h):h||e===g||(h=Zo(i,e)),n&&(a=!0,l=t.apply(f,u)),!a||h||s||(u=f=null),l}var u,s,l,c,f,h,d,p=0,g=!1,v=!0;if("function"!=typeof t)throw new To(W);if(e=0>e?0:+e||0,n===!0){var m=!0;v=!1}else hi(n)&&(m=n.leading,g="maxWait"in n&&ta(+n.maxWait||0,e),v="trailing"in n?n.trailing:v);return a.cancel=r,a}function $r(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new To(W);var n=function(){var r=arguments,i=n.cache,o=e?e.apply(this,r):r[0];if(i.has(o))return i.get(o);var a=t.apply(this,r);return i.set(o,a),a};return n.cache=new $r.Cache,n}function Xr(t){if("function"!=typeof t)throw new To(W);return function(){return!t.apply(this,arguments)}}function Jr(t){return Gr(t,2)}function Qr(t,e){if("function"!=typeof t)throw new To(W);return e=ta("undefined"==typeof e?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=ta(n.length-e,0),o=go(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=go(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function ti(t){if("function"!=typeof t)throw new To(W);return function(e){return t.apply(this,e)}}function ei(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new To(W);return n===!1?r=!1:hi(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lt.leading=r,Lt.maxWait=+e,Lt.trailing=i,Vr(t,e,Lt)}function ni(t,e){return e=null==e?eo:e,Tn(e,E,null,[t],[])}function ri(t,e,n,r){return e&&"boolean"!=typeof e&&Pn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),n="function"==typeof n&&$e(n,r,1),ve(t,e,n)}function ii(t,e,n){return e="function"==typeof e&&$e(e,n,1),ve(t,!0,e)}function oi(t){var e=m(t)?t.length:k;return Un(e)&&Fo.call(t)==Z}function ai(t){return t===!0||t===!1||m(t)&&Fo.call(t)==H}function ui(t){return m(t)&&Fo.call(t)==G}function si(t){return!!t&&1===t.nodeType&&m(t)&&Fo.call(t).indexOf("Element")>-1}function li(t){if(null==t)return!0;var e=t.length;return Un(e)&&(au(t)||_i(t)||oi(t)||m(t)&&su(t.splice))?!e:!yu(t).length}function ci(t,e,n,r){if(n="function"==typeof n&&$e(n,r,3),!n&&zn(t)&&zn(e))return t===e;var i=n?n(t,e):k;return"undefined"==typeof i?Me(t,e,n):!!i}function fi(t){return m(t)&&"string"==typeof t.message&&Fo.call(t)==V}function hi(t){var e=typeof t;return"function"==e||!!t&&"object"==e}function di(t,e,n,r){var i=yu(e),o=i.length;if(!o)return!0;if(null==t)return!1;if(n="function"==typeof n&&$e(n,r,3),!n&&1==o){var a=i[0],u=e[a];if(zn(u))return u===t[a]&&("undefined"!=typeof u||a in Hn(t))}for(var s=go(o),l=go(o);o--;)u=s[o]=e[i[o]],l[o]=zn(u);return Re(Hn(t),i,s,l,n)}function pi(t){return mi(t)&&t!=+t}function gi(t){return null==t?!1:Fo.call(t)==$?Oo.test(Co.call(t)):m(t)&&Mt.test(t)}function vi(t){return null===t}function mi(t){return"number"==typeof t||m(t)&&Fo.call(t)==J}function yi(t){return m(t)&&Fo.call(t)==tt||!1}function _i(t){return"string"==typeof t||m(t)&&Fo.call(t)==nt}function bi(t){return m(t)&&Un(t.length)&&!!Ut[Fo.call(t)]}function wi(t){return"undefined"==typeof t}function xi(t){var e=t?t.length:0;return Un(e)?e?$t(t):[]:Fi(t)}function Si(t){return pe(t,Mi(t))}function Ti(t,e,n){var r=va(t);return n&&Pn(t,e,n)&&(e=null),e?pe(e,r,yu(e)):r}function ki(t){return Ae(t,Mi(t))}function Ni(t,e){return t?Do.call(t,e):!1}function Ai(t,e,n){n&&Pn(t,e,n)&&(e=null);for(var r=-1,i=yu(t),o=i.length,a={};++r<o;){var u=i[r],s=t[u];e?Do.call(a,s)?a[s].push(u):a[s]=[u]:a[s]=u}return a}function Mi(t){if(null==t)return[];hi(t)||(t=wo(t));var e=t.length;e=e&&Un(e)&&(au(t)||ga.nonEnumArgs&&oi(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=go(e),a=e>0;++r<e;)o[r]=r+"";for(var u in t)a&&On(u,e)||"constructor"==u&&(i||!Do.call(t,u))||o.push(u);return o}function Ci(t,e,n){var r={};return e=Cn(e,n,3),ke(t,function(t,n,i){r[n]=e(t,n,i)}),r}function Ri(t){for(var e=-1,n=yu(t),r=n.length,i=go(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function Di(t,e,n){var r=null==t?k:t[e];return"undefined"==typeof r&&(r=n),su(r)?r.call(t):r}function Ei(t,e,n,r){var i=au(t)||bi(t);if(e=Cn(e,r,4),null==n)if(i||hi(t)){var o=t.constructor;n=i?au(t)?new o:[]:va(su(o)&&o.prototype)}else n={};return(i?Xt:ke)(t,function(t,r,i){return e(n,t,r,i)}),n}function Fi(t){return Ze(t,yu(t))}function Ii(t){return Ze(t,Mi(t))}function Oi(t,e,n){return e=+e||0,"undefined"==typeof n?(n=e,e=0):n=+n||0,t>=e&&n>t}function Pi(t,e,n){n&&Pn(t,e,n)&&(e=n=null);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=oa();return ea(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return je(t,e)}function ji(t){return t=u(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function Ui(t){return t=u(t),t&&t.replace(Ct,d).replace(Tt,"")}function zi(t,e,n){t=u(t),e+="";var r=t.length;return n="undefined"==typeof n?r:ea(0>n?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function Li(t){return t=u(t),t&&bt.test(t)?t.replace(yt,p):t}function qi(t){return t=u(t),t&&Et.test(t)?t.replace(Dt,"\\$&"):t}function Ki(t,e,n){t=u(t),e=+e;var r=t.length;if(r>=e||!Jo(e))return t;var i=(e-r)/2,o=Lo(i),a=Uo(i);return n=wn("",a,n),n.slice(0,o)+t+n}function Wi(t,e,n){return n&&Pn(t,e,n)&&(e=0),ia(t,e)}function Bi(t,e){var n="";if(t=u(t),e=+e,1>e||!t||!Jo(e))return n;do e%2&&(n+=t),e=Lo(e/2),t+=t;while(e);return n}function Zi(t,e,n){return t=u(t),n=null==n?0:ea(0>n?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function Yi(t,n,r){var i=e.templateSettings;r&&Pn(t,n,r)&&(n=r=null),t=u(t),n=he(he({},r||n),i,fe);var o,a,s=he(he({},n.imports),i.imports,fe),l=yu(s),c=Ze(s,l),f=0,h=n.interpolate||Rt,d="__p += '",p=xo((n.escape||Rt).source+"|"+h.source+"|"+(h===St?kt:Rt).source+"|"+(n.evaluate||Rt).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++jt+"]")+"\n";t.replace(p,function(e,n,r,i,u,s){return r||(r=i),d+=t.slice(f,s).replace(Ft,g),n&&(o=!0,d+="' +\n__e("+n+") +\n'"),u&&(a=!0,d+="';\n"+u+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+e.length,e}),d+="';\n";var m=n.variable;m||(d="with (obj) {\n"+d+"\n}\n"),d=(a?d.replace(pt,""):d).replace(gt,"$1").replace(vt,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var y=Mu(function(){return yo(l,v+"return "+d).apply(k,c)});if(y.source=d,fi(y))throw y;return y}function Hi(t,e,n){var r=t;return(t=u(t))?(n?Pn(r,e,n):null==e)?t.slice(w(t),x(t)+1):(e+="",t.slice(l(t,e),c(t,e)+1)):t}function Gi(t,e,n){var r=t;return t=u(t),t?t.slice((n?Pn(r,e,n):null==e)?w(t):l(t,e+"")):t}function Vi(t,e,n){var r=t;return t=u(t),t?(n?Pn(r,e,n):null==e)?t.slice(0,x(t)+1):t.slice(0,c(t,e+"")+1):t}function $i(t,e,n){n&&Pn(t,e,n)&&(e=null);var r=P,i=j;if(null!=e)if(hi(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?u(e.omission):i}else r=+e||0;if(t=u(t),r>=t.length)return t;var a=r-i.length;if(1>a)return i;var s=t.slice(0,a);if(null==o)return s+i;if(yi(o)){if(t.slice(a).search(o)){var l,c,f=t.slice(0,a);for(o.global||(o=xo(o.source,(Nt.exec(o)||"")+"g")),o.lastIndex=0;l=o.exec(f);)c=l.index;s=s.slice(0,null==c?a:c)}}else if(t.indexOf(o,a)!=a){var h=s.lastIndexOf(o);h>-1&&(s=s.slice(0,h))}return s+i}function Xi(t){return t=u(t),t&&_t.test(t)?t.replace(mt,S):t}function Ji(t,e,n){return n&&Pn(t,e,n)&&(e=null),t=u(t),t.match(e||It)||[]}function Qi(t,e,n){return n&&Pn(t,e,n)&&(e=null),m(t)?no(t):ge(t,e)}function to(t){return function(){return t}}function eo(t){return t}function no(t){return Ee(ve(t,!0))}function ro(t,e){return Fe(t+"",ve(e,!0))}function io(t,e,n){if(null==n){var r=hi(e),i=r&&yu(e),o=i&&i.length&&Ae(e,i);(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=Ae(e,yu(e)));var a=!0,u=-1,s=su(t),l=o.length;n===!1?a=!1:hi(n)&&"chain"in n&&(a=n.chain);for(;++u<l;){var c=o[u],f=e[c];t[c]=f,s&&(t.prototype[c]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__),i=r.__actions__=$t(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}var o=[this.value()];return Ko.apply(o,arguments),e.apply(t,o)}}(f))}return t}function oo(){return t._=Io,this}function ao(){}function uo(t){return Pe(t+"")}function so(t){return function(e){return null==t?k:t[e]}}function lo(t,e,n){n&&Pn(t,e,n)&&(e=n=null),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=ta(Uo((e-t)/(n||1)),0),o=go(i);++r<i;)o[r]=t,t+=n;return o}function co(t,e,n){if(t=+t,1>t||!Jo(t))return[];var r=-1,i=go(ea(t,sa));for(e=$e(e,n,1);++r<t;)sa>r?i[r]=e(r):e(r);return i}function fo(t){var e=++Eo;return u(t)+e}function ho(t,e){return t+e}function po(t,e,n){n&&Pn(t,e,n)&&(e=null);var r=Cn(),i=null==e;return r===ge&&i||(i=!1,e=r(e,n,3)),i?le(au(t)?t:Yn(t)):We(t,e)}t=t?Qt.defaults(Jt.Object(),t,Qt.pick(Jt,Pt)):Jt;var go=t.Array,vo=t.Date,mo=t.Error,yo=t.Function,_o=t.Math,bo=t.Number,wo=t.Object,xo=t.RegExp,So=t.String,To=t.TypeError,ko=go.prototype,No=wo.prototype,Ao=So.prototype,Mo=(Mo=t.window)&&Mo.document,Co=yo.prototype.toString,Ro=Pe("length"),Do=No.hasOwnProperty,Eo=0,Fo=No.toString,Io=t._,Oo=xo("^"+qi(Fo).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Po=gi(Po=t.ArrayBuffer)&&Po,jo=gi(jo=Po&&new Po(0).slice)&&jo,Uo=_o.ceil,zo=t.clearTimeout,Lo=_o.floor,qo=gi(qo=wo.getPrototypeOf)&&qo,Ko=ko.push,Wo=No.propertyIsEnumerable,Bo=gi(Bo=t.Set)&&Bo,Zo=t.setTimeout,Yo=ko.splice,Ho=gi(Ho=t.Uint8Array)&&Ho,Go=gi(Go=t.WeakMap)&&Go,Vo=function(){try{var e=gi(e=t.Float64Array)&&e,n=new e(new Po(10),0,1)&&e}catch(r){}return n}(),$o=gi($o=go.isArray)&&$o,Xo=gi(Xo=wo.create)&&Xo,Jo=t.isFinite,Qo=gi(Qo=wo.keys)&&Qo,ta=_o.max,ea=_o.min,na=gi(na=vo.now)&&na,ra=gi(ra=bo.isFinite)&&ra,ia=t.parseInt,oa=_o.random,aa=bo.NEGATIVE_INFINITY,ua=bo.POSITIVE_INFINITY,sa=_o.pow(2,32)-1,la=sa-1,ca=sa>>>1,fa=Vo?Vo.BYTES_PER_ELEMENT:0,ha=_o.pow(2,53)-1,da=Go&&new Go,pa={},ga=e.support={};!function(t){ga.funcDecomp=/\bthis\b/.test(function(){return this}),ga.funcNames="string"==typeof yo.name;try{ga.dom=11===Mo.createDocumentFragment().nodeType}catch(e){ga.dom=!1}try{ga.nonEnumArgs=!Wo.call(arguments,1)}catch(e){ga.nonEnumArgs=!0}}(0,0),e.templateSettings={escape:wt,evaluate:xt,interpolate:St,variable:"",imports:{_:e}};var va=function(){function e(){}return function(n){if(hi(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}(),ma=nn(ke),ya=nn(Ne,!0),_a=rn(),ba=rn(!0),wa=da?function(t,e){return da.set(t,e),t}:eo;jo||(Xe=Po&&Ho?function(t){var e=t.byteLength,n=Vo?Lo(e/fa):0,r=n*fa,i=new Po(e);if(n){var o=new Vo(i,0,n);o.set(new Vo(t,0,n))}return e!=r&&(o=new Ho(i,r),o.set(new Ho(t,r))),i}:to(null));var xa=Xo&&Bo?function(t){return new Ht(t)}:to(null),Sa=da?function(t){return da.get(t)}:ao,Ta=function(){return ga.funcNames?"constant"==to.name?Pe("name"):function(t){for(var e=t.name,n=pa[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}:to("")}(),ka=function(){var t=0,e=0;return function(n,r){var i=Ha(),o=z-(i-e);if(e=i,o>0){if(++t>=U)return n}else t=0;return wa(n,r)}}(),Na=Qr(function(t,e){return au(t)||oi(t)?ye(t,Se(e,!1,!0)):[]}),Aa=fn(),Ma=fn(!0),Ca=Qr(function(t,e){t||(t=[]),e=Se(e);var n=e.length,i=de(t,e);for(e.sort(r);n--;){var o=parseFloat(e[n]);if(o!=a&&On(o)){var a=o;Yo.call(t,o,1)}}return i}),Ra=Sn(),Da=Sn(!0),Ea=Qr(function(t){return Be(Se(t,!1,!0))}),Fa=Qr(function(t,e){return au(t)||oi(t)?ye(t,e):[]}),Ia=Qr(_r),Oa=Qr(function(t,e){var n=t?t.length:0;return Un(n)&&(t=Yn(t)),de(t,Se(e))}),Pa=tn(function(t,e,n){Do.call(t,n)?++t[n]:t[n]=1}),ja=cn(ma),Ua=cn(ya,!0),za=pn(Xt,ma),La=pn(te,ya),qa=tn(function(t,e,n){Do.call(t,n)?t[n].push(e):t[n]=[e]}),Ka=tn(function(t,e,n){t[n]=e}),Wa=Qr(function(t,e,n){var r=-1,i="function"==typeof e,o=t?t.length:0,a=Un(o)?go(o):[];return ma(t,function(t){var o=i?e:null!=t&&t[e];a[++r]=o?o.apply(t,n):k}),a}),Ba=tn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Za=_n(ae,ma),Ya=_n(ue,ya),Ha=na||function(){return(new vo).getTime()},Ga=Qr(function(t,e,n){var r=A;if(n.length){var i=_(n,Ga.placeholder);r|=E}return Tn(t,r,e,n,i)}),Va=Qr(function(t,e){e=e.length?Se(e):ki(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Tn(t[i],A,t)}return t}),$a=Qr(function(t,e,n){var r=A|M;if(n.length){var i=_(n,$a.placeholder);r|=E}return Tn(e,r,t,n,i)}),Xa=sn(R),Ja=sn(D),Qa=Qr(function(t,e){return me(t,1,e)}),tu=Qr(function(t,e,n){return me(t,e,n)}),eu=dn(),nu=dn(!0),ru=yn(E),iu=yn(F),ou=Qr(function(t,e){return Tn(t,O,null,null,null,Se(e))}),au=$o||function(t){return m(t)&&Un(t.length)&&Fo.call(t)==Y};ga.dom||(si=function(t){return!!t&&1===t.nodeType&&m(t)&&!lu(t)});var uu=ra||function(t){return"number"==typeof t&&Jo(t)},su=a(/x/)||Ho&&!a(Ho)?function(t){return Fo.call(t)==$}:a,lu=qo?function(t){if(!t||Fo.call(t)!=Q)return!1;var e=t.valueOf,n=gi(e)&&(n=qo(e))&&qo(n);return n?t==n||qo(t)==n:Bn(t)}:Bn,cu=en(he),fu=Qr(function(t){var e=t[0];return null==e?e:(t.push(ce),cu.apply(k,t))}),hu=hn(ke),du=hn(Ne),pu=gn(_a),gu=gn(ba),vu=vn(ke),mu=vn(Ne),yu=Qo?function(t){if(t)var e=t.constructor,n=t.length;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&n&&Un(n)?Zn(t):hi(t)?Qo(t):[]}:Zn,_u=en(Ie),bu=Qr(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=re(Se(e),So);return qn(t,ye(Mi(t),e))}var n=$e(e[0],e[1],3);return Kn(t,function(t,e,r){return!n(t,e,r)})}),wu=Qr(function(t,e){return null==t?{}:"function"==typeof e[0]?Kn(t,$e(e[0],e[1],3)):qn(t,Se(e))}),xu=an(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Su=an(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Tu=mn(),ku=mn(!0);8!=ia(Ot+"08")&&(Wi=function(t,e,n){return(n?Pn(t,e,n):null==e)?e=0:e&&(e=+e),t=Hi(t),ia(t,e||(At.test(t)?16:10))});var Nu=an(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Au=an(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Mu=Qr(function(t,e){try{return t.apply(k,e)}catch(n){return fi(n)?n:new mo(n)}}),Cu=ln(ie),Ru=ln(oe,!0);return e.prototype=n.prototype,y.prototype=va(n.prototype),y.prototype.constructor=y,X.prototype=va(n.prototype),X.prototype.constructor=X,Kt.prototype["delete"]=Wt,Kt.prototype.get=Bt,Kt.prototype.has=Zt,Kt.prototype.set=Yt,Ht.prototype.push=Vt,$r.Cache=Kt,e.after=Yr,e.ary=Hr,e.assign=cu,e.at=Oa,e.before=Gr,e.bind=Ga,e.bindAll=Va,e.bindKey=$a,e.callback=Qi,e.chain=xr,e.chunk=Vn,e.compact=$n,e.constant=to,e.countBy=Pa,e.create=Ti,e.curry=Xa,e.curryRight=Ja,e.debounce=Vr,e.defaults=fu,e.defer=Qa,e.delay=tu,e.difference=Na,e.drop=Xn,e.dropRight=Jn,e.dropRightWhile=Qn,e.dropWhile=tr,e.fill=er,e.filter=Er,e.flatten=rr,e.flattenDeep=ir,e.flow=eu,e.flowRight=nu,e.forEach=za,e.forEachRight=La,e.forIn=pu,e.forInRight=gu,e.forOwn=vu,e.forOwnRight=mu,e.functions=ki,e.groupBy=qa,e.indexBy=Ka,e.initial=ar,e.intersection=ur,e.invert=Ai,e.invoke=Wa,e.keys=yu,e.keysIn=Mi,e.map=Or,e.mapValues=Ci,e.matches=no,e.matchesProperty=ro,e.memoize=$r,e.merge=_u,e.mixin=io,e.negate=Xr,e.omit=bu,e.once=Jr,e.pairs=Ri,e.partial=ru,e.partialRight=iu,e.partition=Ba,e.pick=wu,e.pluck=Pr,e.property=uo,e.propertyOf=so,e.pull=cr,e.pullAt=Ca,e.range=lo,e.rearg=ou,e.reject=jr,e.remove=fr,e.rest=hr,e.restParam=Qr,e.shuffle=zr,e.slice=dr,e.sortBy=Kr,e.sortByAll=Wr,e.sortByOrder=Br,e.spread=ti,e.take=pr,e.takeRight=gr,e.takeRightWhile=vr,e.takeWhile=mr,e.tap=Sr,e.throttle=ei,e.thru=Tr,e.times=co,e.toArray=xi,e.toPlainObject=Si,e.transform=Ei,e.union=Ea,e.uniq=yr,e.unzip=_r,e.values=Fi,e.valuesIn=Ii,e.where=Zr,e.without=Fa,e.wrap=ni,e.xor=br,e.zip=Ia,e.zipObject=wr,e.backflow=nu,e.collect=Or,e.compose=nu,e.each=za,e.eachRight=La,e.extend=cu,e.iteratee=Qi,e.methods=ki,e.object=wr,e.select=Er,e.tail=hr,e.unique=yr,io(e,e),e.add=ho,e.attempt=Mu,e.camelCase=xu,e.capitalize=ji,e.clone=ri,e.cloneDeep=ii,e.deburr=Ui,e.endsWith=zi,e.escape=Li,e.escapeRegExp=qi,e.every=Dr,e.find=ja,e.findIndex=Aa,e.findKey=hu,e.findLast=Ua,e.findLastIndex=Ma,e.findLastKey=du,e.findWhere=Fr,e.first=nr,e.has=Ni,e.identity=eo,e.includes=Ir,e.indexOf=or,e.inRange=Oi,e.isArguments=oi,e.isArray=au,e.isBoolean=ai,e.isDate=ui,e.isElement=si,e.isEmpty=li,e.isEqual=ci,e.isError=fi,e.isFinite=uu,e.isFunction=su,e.isMatch=di,e.isNaN=pi,e.isNative=gi,e.isNull=vi,e.isNumber=mi,e.isObject=hi,e.isPlainObject=lu,e.isRegExp=yi,e.isString=_i,e.isTypedArray=bi,e.isUndefined=wi,e.kebabCase=Su,e.last=sr,e.lastIndexOf=lr,e.max=Cu,e.min=Ru,e.noConflict=oo,e.noop=ao,e.now=Ha,e.pad=Ki,e.padLeft=Tu,e.padRight=ku,e.parseInt=Wi,e.random=Pi,e.reduce=Za,e.reduceRight=Ya,e.repeat=Bi,e.result=Di,e.runInContext=T,e.size=Lr,e.snakeCase=Nu,e.some=qr,e.sortedIndex=Ra,e.sortedLastIndex=Da,e.startCase=Au,e.startsWith=Zi,e.sum=po,e.template=Yi,e.trim=Hi,e.trimLeft=Gi,e.trimRight=Vi,e.trunc=$i,e.unescape=Xi,e.uniqueId=fo,e.words=Ji,e.all=Dr,e.any=qr,e.contains=Ir,e.detect=ja,e.foldl=Za,e.foldr=Ya,e.head=nr,e.include=Ir,e.inject=Za,io(e,function(){var t={};return ke(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=Ur,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return Ur(e,t)}):Ur(this.value())},e.VERSION=N,Xt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),Xt(["dropWhile","filter","map","takeWhile"],function(t,e){var n=e!=K,r=e==L;X.prototype[t]=function(t,i){var o=this.__filtered__,a=o&&r?new X(this):this.clone(),u=a.__iteratees__||(a.__iteratees__=[]);return u.push({done:!1,count:0,index:0,iteratee:Cn(t,i,1),limit:-1,type:e}),a.__filtered__=o||n,a}}),Xt(["drop","take"],function(t,e){var n=t+"While";X.prototype[t]=function(n){var r=this.__filtered__,i=r&&!e?this.dropWhile():this.clone();if(n=null==n?1:ta(Lo(n)||0,0),r)e?i.__takeCount__=ea(i.__takeCount__,n):sr(i.__iteratees__).limit=n;else{var o=i.__views__||(i.__views__=[]);o.push({size:n,type:t+(i.__dir__<0?"Right":"")})}return i},X.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()},X.prototype[t+"RightWhile"]=function(t,e){return this.reverse()[n](t,e).reverse()}}),Xt(["first","last"],function(t,e){var n="take"+(e?"Right":"");X.prototype[t]=function(){return this[n](1).value()[0]}}),Xt(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");X.prototype[t]=function(){return this[n](1)}}),Xt(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?Ee:Pe;X.prototype[t]=function(t){return this[n](r(t))}}),X.prototype.compact=function(){return this.filter(eo)},X.prototype.reject=function(t,e){return t=Cn(t,e,1),this.filter(function(e){return!t(e)})},X.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=0>t?this.takeRight(-t):this.drop(t);return"undefined"!=typeof e&&(e=+e||0,n=0>e?n.dropRight(-e):n.take(e-t)),n},X.prototype.toArray=function(){return this.drop(0)},ke(X.prototype,function(t,n){var r=e[n];if(r){var i=/^(?:filter|map|reject)|While$/.test(n),o=/^(?:first|last)$/.test(n);e.prototype[n]=function(){var n=arguments,a=(n.length,this.__chain__),u=this.__wrapped__,s=!!this.__actions__.length,l=u instanceof X,c=n[0],f=l||au(u);f&&i&&"function"==typeof c&&1!=c.length&&(l=f=!1);var h=l&&!s;if(o&&!a)return h?t.call(u):r.call(e,this.value());var d=function(t){var i=[t];return Ko.apply(i,n),r.apply(e,i)};if(f){var p=h?u:new X(this),g=t.apply(p,n);if(!o&&(s||g.__actions__)){var v=g.__actions__||(g.__actions__=[]);v.push({func:Tr,args:[d],thisArg:e})}return new y(g,a)}return this.thru(d)}}}),Xt(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Ao:ko)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),ke(X.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=pa[i]||(pa[i]=[]);o.push({name:n,func:r})}}),pa[bn(null,M).name]=[{name:"wrapper",func:null}],X.prototype.clone=et,X.prototype.reverse=rt,X.prototype.value=qt,e.prototype.chain=kr,e.prototype.commit=Nr,e.prototype.plant=Ar,e.prototype.reverse=Mr,e.prototype.toString=Cr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Rr,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var k,N="3.6.0",A=1,M=2,C=4,R=8,D=16,E=32,F=64,I=128,O=256,P=30,j="...",U=150,z=16,L=0,q=1,K=2,W="Expected a function",B="__lodash_placeholder__",Z="[object Arguments]",Y="[object Array]",H="[object Boolean]",G="[object Date]",V="[object Error]",$="[object Function]",X="[object Map]",J="[object Number]",Q="[object Object]",tt="[object RegExp]",et="[object Set]",nt="[object String]",rt="[object WeakMap]",it="[object ArrayBuffer]",ot="[object Float32Array]",at="[object Float64Array]",ut="[object Int8Array]",st="[object Int16Array]",lt="[object Int32Array]",ct="[object Uint8Array]",ft="[object Uint8ClampedArray]",ht="[object Uint16Array]",dt="[object Uint32Array]",pt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,vt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,mt=/&(?:amp|lt|gt|quot|#39|#96);/g,yt=/[&<>"'`]/g,_t=RegExp(mt.source),bt=RegExp(yt.source),wt=/<%-([\s\S]+?)%>/g,xt=/<%([\s\S]+?)%>/g,St=/<%=([\s\S]+?)%>/g,Tt=/[\u0300-\u036f\ufe20-\ufe23]/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Nt=/\w*$/,At=/^0[xX]/,Mt=/^\[object .+?Constructor\]$/,Ct=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Rt=/($^)/,Dt=/[.*+?^${}()|[\]\/\\]/g,Et=RegExp(Dt.source),Ft=/['\n\r\u2028\u2029\\]/g,It=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),Ot=" 	\f\ufeff\n\r\u2028\u2029",Pt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"],jt=-1,Ut={};Ut[ot]=Ut[at]=Ut[ut]=Ut[st]=Ut[lt]=Ut[ct]=Ut[ft]=Ut[ht]=Ut[dt]=!0,Ut[Z]=Ut[Y]=Ut[it]=Ut[H]=Ut[G]=Ut[V]=Ut[$]=Ut[X]=Ut[J]=Ut[Q]=Ut[tt]=Ut[et]=Ut[nt]=Ut[rt]=!1;

var zt={};zt[Z]=zt[Y]=zt[it]=zt[H]=zt[G]=zt[ot]=zt[at]=zt[ut]=zt[st]=zt[lt]=zt[J]=zt[Q]=zt[tt]=zt[nt]=zt[ct]=zt[ft]=zt[ht]=zt[dt]=!0,zt[V]=zt[$]=zt[X]=zt[et]=zt[rt]=!1;var Lt={leading:!1,maxWait:0,trailing:!1},qt={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Kt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Wt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Bt={"function":!0,object:!0},Zt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yt=Bt[typeof n]&&n&&!n.nodeType&&n,Ht=Bt[typeof e]&&e&&!e.nodeType&&e,Gt=Yt&&Ht&&"object"==typeof t&&t,Vt=Bt[typeof self]&&self&&self.Object&&self,$t=Bt[typeof window]&&window&&window.Object&&window,Xt=Ht&&Ht.exports===Yt&&Yt,Jt=Gt||$t!==(this&&this.window)&&$t||Vt||this,Qt=T();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Jt._=Qt,define(function(){return Qt})):Yt&&Ht?Xt?(Ht.exports=Qt)._=Qt:Yt._=Qt:Jt._=Qt}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){function r(t,e){function n(t,e){var n=t;return e&&(n=e.reduce(o,t)),n}function r(t){var e=[];return t.metaKey&&e.push("meta"),t.ctrlKey&&e.push("ctrl"),t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),e}function o(t,e){var n=t;switch(e){case"meta":n+=1e3;break;case"ctrl":n+=1e4;break;case"shift":n+=1e5;break;case"alt":n+=1e6}return n}function a(){this.sourceSelection.on("keyup",this.onKeyUp.bind(this)),this.sourceSelection.on("keydown",this.onKeyDown.bind(this))}e||i||(e=d3.event);var u={sourceSelection:t,keyUpRespondersForKeyIds:{},keyDownRespondersForKeyIds:{},enable:!0,stopPropIfResponderFound:!0,absorbAllKeyUpEvents:!1,absorbAllKeyDownEvents:!1};return u.keyCodesForNames={backspace:8,tab:9,enter:13,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,"delete":46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,semicolon:186,equal:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backslash:220,closeBracket:221,singleQuote:222},u.routeKeyUp=function(t,e,r){var i=n(this.keyCodesForNames[t],e);this.keyUpRespondersForKeyIds[i]=r},u.routeKeyDown=function(t,e,r){var i=n(this.keyCodesForNames[t],e);this.keyDownRespondersForKeyIds[i]=r},u.unrouteKeyUp=function(t,e){var r=n(this.keyCodesForNames[t],e);delete this.keyUpRespondersForKeyIds[r]},u.unrouteKeyDown=function(t,e){var r=n(this.keyCodesForNames[t],e);delete this.keyDownRespondersForKeyIds[r]},u.onKeyUp=function(){if(this.enable){this.absorbAllKeyUpEvents&&d3.event.stopPropagation();var t=n(d3.event.which,r(d3.event));t in this.keyUpRespondersForKeyIds&&(this.stopPropIfResponderFound&&d3.event.stopPropagation(),this.keyUpRespondersForKeyIds[t]())}},u.onKeyDown=function(){if(this.enable){this.absorbAllKeyDownEvents&&d3.event.stopPropagation();var t=n(d3.event.which,r(d3.event));t in this.keyDownRespondersForKeyIds&&(this.stopPropIfResponderFound&&d3.event.stopPropagation(),this.keyDownRespondersForKeyIds[t]())}},a.bind(u)(),u}var i="object"==typeof e&&"object"==typeof e.exports;i&&(e.exports=r)},{}],22:[function(t,e,n){function r(t,e,n,r,i){this.parentSelector=t,this.text=e,this.okText=n,this.respondToOK=r,this.cleanUpFunction=i}r.prototype.show=function(){var t=d3.select(this.parentSelector).append("div").attr("id","OKCancelDialog").classed("notification",!0);t.append("p").attr("id","dialogText").text(this.text),t.append("button").attr("id","OKButton").text(this.okText?this.okText:"OK").on("click",this.respondToOKClick.bind(this)),t.append("button").attr("id","CancelButton").text("Cancel").on("click",this.respondToCancelClick.bind(this))},r.prototype.respondToOKClick=function(){this.respondToOK(),this.cleanUpFunction&&this.cleanUpFunction(),d3.select(this.parentSelector).select("#OKCancelDialog").remove()},r.prototype.respondToCancelClick=function(){this.cleanUpFunction&&this.cleanUpFunction(),d3.select(this.parentSelector).select("#OKCancelDialog").remove()},e.exports=r},{}],23:[function(t,e,n){function r(t){function e(){var t=p.append("li");return t.append("label").text("Emphasize").classed("editcontrol",!0),g=t.append("input").attr({type:"checkbox",id:"emphasize"}).classed("editcontrol",!0),g.on("change",s),g}function n(t){var e=t.detail.focusNode;g.node().checked=e.emphasize,o.select("#tags-field").node().value=e.tags?e.tags.join(" "):"",o.select("#formats-field").node().value=e.formats?e.formats.join(" "):""}var r,u,s,l,c,f,h,d;if(t&&(r=t.root,t.responders&&(s=t.responders.respondToEmphasisCheckChange,l=t.responders.respondToAddChildSprigCmd,c=t.responders.respondToNewSprigotCmd,f=t.responders.respondToDeleteSprigCmd,h=t.responders.respondToMoveChildLeftCmd,d=t.responders.respondToMoveChildRightCmd)),!r)throw new Error("No root passed to renderAdminPanel.");var p=r.select("#admin-control-root");p.empty()&&(p=r.append("ul").attr("id","admin-control-root"));var u=a({root:p,baseElementType:"li",baseClass:"admin-control"});u.render([{id:"newsprigbutton",elementType:"button",text:"+",onClick:l},{id:"deletesprigbutton",elementType:"button",text:"-",onClick:f},{id:"move-left-button",elementType:"button",text:"Move left",onClick:h},{id:"move-right-button",elementType:"button",text:"Move right",onClick:d},{id:"newsprigotbutton",elementType:"button",text:"New Document",onClick:c},{id:"tags-label",elementType:"label",text:"Tags"},{id:"tags-field",elementType:"input",attributes:{value:"tags go here"},onKeyUp:i,onKeyDown:i},{id:"format-label",elementType:"label",text:"Formats"},{id:"formats-field",elementType:"input",attributes:{value:""},onKeyUp:i,onKeyDown:i}]);var g=e();document.addEventListener("node-focus-change",n)}function i(){o.event.stopPropagation()}var o=t("./lib/d3-small"),a=(t("./okcanceldialog"),t("./control-renderer"));e.exports=r},{"./control-renderer":4,"./lib/d3-small":14,"./okcanceldialog":22}],24:[function(t,e,n){function r(t){var e={opts:t,spriglogSel:null,controllerType:"bloge",sprigList:[],sprigShowRange:[0,200],numberOfSprigsToRevealPerScrollEnd:200};return e.init=function(e){this.opts=t?t:{};var n=i(),r=n.setUpOuterContainer(this.opts.doc.style?this.opts.doc.style+".css":"bloge.css","bloge",this.opts);return r?(this.spriglogSel=d3.select(".bloge"),void o("//use.typekit.net/med0yzx.js",e)):void setTimeout(e,0)},e.load=function(){var t=this.opts.doc.id;a.init(null,t),u(t).getSprigList(t,this.opts.format,function(t,e){t?this.opts.loadDone(t,null):e?(this.sprigList=e,e.length>0&&d3.select("title").text("Sprigot - "+this.sprigList[0].title),this.sprigList.length<this.sprigShowRange[1]&&(this.sprigShowRange[1]=this.sprigList.length),this.render(e.slice(this.sprigShowRange[0],this.sprigShowRange[1])),window.onscroll=this.respondToScroll.bind(this),a.syncURLToSprigId(this.opts.doc.rootSprig),this.opts.loadDone()):this.opts.loadDone("Sprig tree not found.")}.bind(this))},e.render=function(t){var e=this.spriglogSel.selectAll(".sprig").data(t,function(t){return t.id}),n=e.enter().append("div").attr("class",function(t){var e=["sprig","textpane"];return t.tags&&(e=e.concat(t.tags)),e.join(" ")});n.append("div").classed("title",!0),n.append("div").classed("sprigbody",!0),this.opts.doc.showStamps&&n.append("div").classed("stamps",!0),n.filter(".click-to-display").on("click",function(){var t=d3.select(this);t.classed("displaying-hidden",!t.classed("displaying-hidden"))}),e.select(".title").text(function(t){return t.title}),this.opts.doc.showStamps||e.select(".stamps").text(function(t){var e=new Date(t.created);return stamp=e.toLocaleString(),stamp}),e.select(".sprigbody").html(function(t){return t.body});var r=e.exit();r.remove()},e.respondToScroll=function(){document.body.scrollHeight-document.body.scrollTop===document.body.clientHeight&&this.sprigShowRange[0]+this.sprigShowRange[1]<this.sprigList.length&&(this.sprigShowRange[1]+=this.numberOfSprigsToRevealPerScrollEnd,this.sprigShowRange[0]+this.sprigShowRange[1]>=this.sprigList.length&&(this.sprigShowRange[1]=this.sprigList.length-this.sprigShowRange[0]),this.render(this.sprigList.slice(this.sprigShowRange[0],this.sprigShowRange[1])))},e}var i=t("./sprigotbasemixin"),o=t("./load_a_typekit"),a=t("./historian"),u=t("./get-store");e.exports=r},{"./get-store":8,"./historian":10,"./load_a_typekit":15,"./sprigotbasemixin":26}],25:[function(t,e,n){function r(t){var e={graph:null,divider:null,camera:null,opts:t,controllerType:"sprigot",metaPressed:!1,docStrokeRouter:null};return e.init=function(t){var e=o(),n=e.setUpOuterContainer("sprig.css","sprigot",this.opts);if(!n)return void t();var r=[.5,1];this.isMobile()&&(r=[.25,1]),this.camera=g(r),this.graph=f();var i=v.select(".sprigot");this.graph.init(i,this.camera,h,c,s,this),this.divider=l(),this.divider.init(i,this.graph,c,this.camera,this),c.init(i,this.graph,h,this,this.divider),this.divider.syncExpanderArrow(),this.initDocEventResponders(),this.tagElementsWithCSSHackClasses(),u("//use.typekit.net/uoo5gyw.js",t)},e.load=function(){function t(t,e){if(t&&this.opts.loadDone(t,null),e){e=p.sanitizeTreeForD3(e),v.select("title").text("Sprigot - "+e.title);var n=this.opts.initialTargetSprigId,r=function(){return!0};n&&(r=function(t){return n===t.id}),this.graph.loadNodeTreeToGraph(e,r,function(){"findunread"===n&&this.respondToFindUnreadCmd(),this.opts.loadDone()}.bind(this))}else this.opts.loadDone("Sprig tree not found.")}var e=i(this.opts);s.init(this.graph.treeNav,e),m.getSprigTree(e,this.opts.format,t.bind(this))},e.initDocEventResponders=function(){var t=v.select(document);c.editAvailable&&t.on("click",c.endEditing.bind(c)),this.docStrokeRouter=a(t),this.docStrokeRouter.stopPropIfResponderFound=!1,this.docStrokeRouter.routeKeyUp("escape",null,function(){c.contentZone.classed("editing")&&c.changeEditMode(!1)}),this.docStrokeRouter.routeKeyUp("e",null,function(){"block"===c.contentZone.style("display")&&c.changeEditMode(!0)}),this.docStrokeRouter.routeKeyUp("downArrow",null,this.graph.treeNav.respondToDownArrow.bind(this.graph.treeNav)),this.docStrokeRouter.routeKeyUp("upArrow",null,this.graph.treeNav.respondToUpArrow.bind(this.graph.treeNav)),this.docStrokeRouter.routeKeyUp("leftArrow",null,this.graph.treeNav.respondToLeftArrow.bind(this.graph.treeNav)),this.docStrokeRouter.routeKeyUp("rightArrow",null,this.graph.treeNav.respondToRightArrow.bind(this.graph.treeNav)),this.docStrokeRouter.routeKeyUp("equal",["shift"],this.respondToAddChildSprigCmd.bind(this)),this.docStrokeRouter.routeKeyUp("u",null,this.respondToFindUnreadCmd.bind(this))},e.respondToAddChildSprigCmd=function(){v.event.stopPropagation(),c.contentZone.classed("editing")&&c.changeEditMode(!1);var t=(i(this.opts),(new Date).toJSON()),e={id:c.makeId(8),title:"New Sprig",body:"",created:t,modified:t},n=this.graph.focusNode.children;n||(n=this.graph.focusNode._children),n||(n=[]),n.push(e),this.graph.focusNode.children=n,c.changeEditMode(!0),m.saveChildAndParentSprig(e,p.serializeTreedNode(this.graph.focusNode)),h.update(this.graph.nodeRoot,this.graph.treeRenderer.treeNodeAnimationDuration),setTimeout(function(){this.graph.focusOnSprig(e.id),c.showTextpaneForTreeNode(e)}.bind(this),this.graph.treeRenderer.treeNodeAnimationDuration+100)},e.respondToDeleteSprigCmd=function(){v.event.stopPropagation(),c.contentZone.classed("editing")&&c.changeEditMode(!1,!0);var t=this.graph.focusNode.parent,e=t.children.indexOf(this.graph.focusNode);t.children.splice(e,1);var n=i(this.opts),r={id:this.graph.focusNode.id,doc:n};m.deleteChildAndSaveParentSprig(r,p.serializeTreedNode(t));var o=this.graph.treeNav;h.update(this.graph.nodeRoot,this.graph.treeRenderer.treeNodeAnimationDuration),setTimeout(function(){o.chooseTreeNode(t,v.select("#"+t.id).node())},this.graph.treeRenderer.treeNodeAnimationDuration+500)},e.respondToNewSprigotCmd=function(){var t={id:d.randomId(8),rootSprig:d.randomId(8),authors:["deathmtn"],admins:["deathmtn"]},e={id:t.rootSprig,doc:t.id,title:"Root",body:"Hello. Type some stuff here.",children:[]};m.createNewDoc(t,e)},e.respondToFindUnreadCmd=function(){var t=p.mapPathInD3Tree(this.graph.nodeIsUnvisited.bind(this.graph),this.graph.treeNav.sprigTree,100);if(t.length>0){(t.length>1||t[0].id!==this.graph.focusNode.id)&&this.graph.treeNav.followPathToSprig(t);var e=t[t.length-1];s.syncURLToSprigId(e.id),c.syncTextpaneWithTreeNode(e)}else c.disableFindUnreadLink()},e.respondToSwitchToGraphCmd=function(){this.graph.pane.classed("expandedPane")||this.divider.toggleGraphExpansion()},e.respondToMoveChildLeftCmd=function(){this.moveFocusNodeInDirection(-1)},e.respondToMoveChildRightCmd=function(){this.moveFocusNodeInDirection(1)},e.moveFocusNodeInDirection=function(t){this.graph.swapNodeWithSibling(this.graph.focusNode,t),h.update(this.graph.nodeRoot,this.graph.treeRenderer.treeNodeAnimationDuration)},e.isMobile=function(){var t="only screen and (max-device-height: 568px)";return window.matchMedia(t).matches},e.tagElementsWithCSSHackClasses=function(){this.isMobile()&&!navigator.userAgent.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i)&&(v.select(".sprigot").classed("is-not-ios-seven",!0),v.select("#graphPane").classed("is-not-ios-seven",!0),v.select(".divider").classed("is-not-ios-seven",!0),v.select("#nongraphPane").classed("is-not-ios-seven",!0))},e}function i(t){return t.doc.id?t.doc.id:t.rootId}var o=t("./sprigotbasemixin"),a=t("strokerouter"),u=t("./load_a_typekit"),s=t("./historian"),l=t("./divider"),c=t("./textstuff"),f=t("./graph"),h=t("./treerenderer"),d=t("idmaker"),p=t("./d3sprigbridge"),g=t("./camera"),v=t("./lib/d3-small"),m=t("./legacy-store");e.exports=r},{"./camera":2,"./d3sprigbridge":5,"./divider":7,"./graph":9,"./historian":10,"./legacy-store":13,"./lib/d3-small":14,"./load_a_typekit":15,"./sprigotbasemixin":26,"./textstuff":29,"./treerenderer":31,idmaker:19,strokerouter:21}],26:[function(t,e,n){function r(){var t={};return t.setUpOuterContainer=function(t,e,n){var r=!1,i=d3.select(".outer-container");(n.forceRebuild||!i.empty())&&(n.forceRebuild||!i.classed(e))&&(i.remove(),i=d3.select(".outer-container"));var o=d3.select("head"),a=o.select("link[rel=stylesheet]");return a.empty()&&(a=o.append("link"),a.attr({rel:"stylesheet",type:"text/css",href:t})),a.attr("href")!==t&&a.attr("href",t),i.empty()&&(i=d3.select("body").append("section").classed("outer-container",!0).classed(e,!0),r=!0),r},t}e.exports=r},{}],27:[function(t,e,n){e.exports={defaultDoc:"About"}},{}],28:[function(t,e,n){},{}],29:[function(t,e,n){var r=t("idmaker"),i=t("./lib/d3-small"),o=t("strokerouter"),a=t("./render-admin-panel"),u=t("./get-store"),s={graph:null,treeRenderer:null,store:null,sprigot:null,divider:null,sprigot:null,contentZoneStrokeRouter:null,pane:null,textpane:null,textcontent:null,titleField:null,contentZone:null,findUnreadLink:null,showGraphLink:null,downLink:null,editAvailable:!0};s.init=function(t,e,n,r,u){this.graph=e,this.treeRenderer=n,this.sprigot=r,this.divider=u,this.pane=t.append("div").classed("pane",!0).attr("id","nongraphPane"),this.pane.append("div").attr("id","questionDialog"),this.textpane=this.pane.append("div").attr("id","textpane").classed("textpane",!0),this.contentZone=this.textpane.append("div").classed("contentZone",!0).style("display","none"),this.titleField=this.contentZone.append("span").classed("sprigTitleField",!0).style("display","none"),this.textcontent=this.contentZone.append("div").classed("textcontent",!0).attr("tabindex",0),this.editAvailable&&a({root:this.textpane,responders:{respondToEmphasisCheckChange:this.respondToEmphasisCheckChange.bind(this),respondToAddChildSprigCmd:r.respondToAddChildSprigCmd.bind(r),respondToNewSprigotCmd:r.respondToNewSprigotCmd.bind(r),respondToDeleteSprigCmd:r.respondToDeleteSprigCmd.bind(r),respondToMoveChildLeftCmd:r.respondToMoveChildLeftCmd.bind(r),respondToMoveChildRightCmd:r.respondToMoveChildRightCmd.bind(r)}}),this.initFindUnreadLink(),i.selectAll("#textpane .contentZone,.editcontrol").style("display","none"),this.editAvailable&&(this.textcontent.on("click",this.startEditing.bind(this)),this.titleField.on("click",this.startEditing.bind(this)),this.contentZoneStrokeRouter=o(this.contentZone),this.contentZoneStrokeRouter.routeKeyDown("enter",["meta"],this.endEditing.bind(this)),this.contentZoneStrokeRouter.absorbAllKeyUpEvents=!0)},s.initFindUnreadLink=function(){this.findUnreadLink=this.pane.append("a").attr("id","findunreadlink").classed("control-link",!0).classed("findunread-link",!0).text("Find Unread").style("display","none").on("click",this.sprigot.respondToFindUnreadCmd.bind(this.sprigot))},s.syncTextpaneWithTreeNode=function(t){if(this.textcontent.datum(t),this.titleField.datum(t),this.textcontent.html(t.body),this.titleField.html(t.title),this.editAvailable){var e={detail:{focusNode:t}};document.dispatchEvent(new CustomEvent("node-focus-change",e))}this.sprigot.isMobile()&&window.scrollTo(0,0)},s.showTextpaneForTreeNode=function(t){this.syncTextpaneWithTreeNode(t),i.selectAll("#textpane .contentZone,.editcontrol").style("display","block"),this.contentZone.style("display","block"),this.uncollapseTextpane()},s.fadeInTextPane=function(t){if("none"===this.contentZone.style("display")){var e=i.selectAll("#textpane .contentZone,.editcontrol");this.textpane.style("opacity",0),e.style("opacity",0),this.contentZone.style("opacity",0),e.style("display","block").transition().duration(t).style("opacity",1),this.contentZone.style("display","block").transition().duration(t).style("opacity",1),this.textpane.transition().duration(t).style("opacity",1)}},s.fadeInControlLinks=function(t){var e=i.selectAll("#nongraphPane .control-link");e.style("opacity",0),e.style("display","block").transition().duration(t).style("opacity",1)},s.initialShow=function(t){setTimeout(function(){this.syncTextpaneWithTreeNode(t),this.fadeInTextPane(750),this.fadeInControlLinks(800)}.bind(this),725)},s.uncollapseTextpane=function(){var t=this.pane.classed("collapsedPane");t&&this.divider.toggleGraphExpansion()},s.showTitle=function(){this.titleField.text(this.titleField.datum().title),this.titleField.style("display","block")},s.disableFindUnreadLink=function(){this.findUnreadLink.text("You've read all the sprigs!"),this.findUnreadLink.transition().duration(700).style("opacity",.3).style("cursor","default").attr("href",null),this.findUnreadLink.transition().delay(3e3).duration(2e3).style("opacity",0)},s.makeId=function(t){return"s"+r.randomId(t)},s.changeEditMode=function(t,e){if(this.editAvailable)if(this.textcontent.attr("contenteditable",t),this.titleField.attr("contenteditable",t),this.contentZone.classed("editing",t),t)this.showTitle(),this.textcontent.node().focus();else{this.titleField.style("display","none");var n=this.textcontent.datum();n.body=this.textcontent.html();var r=this.titleField.text(),o=r!==n.title;n.title=r,o&&i.select("#"+n.id+" text").text(n.title);var a={detail:{focusNode:n}};if(document.dispatchEvent(new CustomEvent("node-focus-change",a)),this.textcontent.datum(n),this.titleField.datum(n),!e){var s=this.sprigot.opts.doc.id;u(s).saveSprigFromTreeNode(this.textcontent.datum(),s)}}},s.endEditing=function(){this.contentZone.classed("editing")&&this.changeEditMode(!1)},s.respondToEmphasisCheckChange=function(){if(this.graph.focusNode){this.graph.focusNode.emphasize=this.emphasizeCheckbox.node().checked,this.treeRenderer.update(this.graph.nodeRoot);var t=this.sprigot.opts.doc.id;u(t).saveSprigFromTreeNode(this.graph.focusNode,t)}},s.startEditing=function(){i.event.stopPropagation(),this.contentZone.classed("editing")||this.changeEditMode(!0)},e.exports=s},{"./get-store":8,"./lib/d3-small":14,"./render-admin-panel":23,idmaker:19,strokerouter:21}],30:[function(t,e,n){function r(){var t={sprigTree:null,graphCamera:null,treeRenderer:null,graph:null,textStuff:null};return t.init=function(t,e,n,r,i){this.sprigTree=t,this.graphCamera=e,this.treeRenderer=n,this.graph=r,this.textStuff=i},t.chooseTreeNode=function(t,e,n){this.expandChildren(t),this.graph.focusOnTreeNode(t,e,n),this.textStuff.showTextpaneForTreeNode(t)},t.toggleChildren=function(t){t.children?(t._children=t.children,t.children=null):this.expandChildren(t)},t.expandChildren=function(t){t._children&&(t.children=t._children,t._children=null)},t.collapseRecursively=function(e){e.children&&(e._children=e.children,e._children.forEach(t.collapseRecursively),e.children=null)},t.nodeIsExpanded=function(t){return t.children&&!t._children},t.followBranchOfNode=function(t){var e=null;if("object"==typeof t.children)for(var n=t.children.length-1;n>=0&&(e=t.children[n],"boolean"!=typeof e.emphasized||!e.emphasized);--n);if(e){var r=d3.select("#"+e.id).node();this.chooseTreeNode(e,r)}},t.followParentOfNode=function(t,e){if("object"==typeof t.parent){var n=d3.select("#"+t.parent.id);this.chooseTreeNode(t.parent,n.node()),this.graphCamera.panToElement(n,e)}},t.moveToSiblingNode=function(t,e,n){if("object"==typeof t.parent&&"object"==typeof t.parent.children){var r=t.parent.children.indexOf(t),i=r+e;if(i>-1&&i<t.parent.children.length){var o=t.parent.children[i],a=d3.select("#"+o.id).node();o._children&&this.expandChildren(o),this.graph.focusOnTreeNode(o,a,n),this.textStuff.showTextpaneForTreeNode(o)}}},t.goToSprigId=function(t,e){var n=i.mapPathToSprigId(t,this.sprigTree,100);if(n.length>0){var r=n[n.length-1];this.graph.focusNode&&r.id===this.graph.focusNode.id||this.followPathToSprig(n,e,function(){this.textStuff.showTextpaneForTreeNode(r)}.bind(this))}},t.followPathToSprig=function(t,e,n){if(!e)var e=this.treeRenderer.treeNodeAnimationDuration-200;t.forEach(function(t){this.expandChildren(t)}.bind(this)),this.treeRenderer.update(this.sprigTree,0),this.graph.focusOnSprig(t[t.length-1].id,e,n)},t.respondToDownArrow=function(){d3.event.stopPropagation(),this.nodeIsExpanded(this.graph.focusNode)?this.followBranchOfNode(this.graph.focusNode):this.chooseTreeNode(this.graph.focusNode,d3.select("#"+this.graph.focusNode.id).node())},t.respondToUpArrow=function(){d3.event.stopPropagation(),this.followParentOfNode(this.graph.focusNode)},t.respondToLeftArrow=function(){d3.event.stopPropagation(),this.moveToSiblingNode(this.graph.focusNode,-1)},t.respondToRightArrow=function(){d3.event.stopPropagation(),this.moveToSiblingNode(this.graph.focusNode,1)},t}var i=t("./d3sprigbridge");e.exports=r},{"./d3sprigbridge":5}],31:[function(t,e,n){function r(t,e){return"translate("+t+", "+e+")"}function o(t,e,n){t.each(function(t){for(var r,i=a.select(this),o=e(t).split(/\s+/).reverse(),u=[],s=1.1,l=i.attr("y"),c=parseFloat(i.attr("dy")),f=i.text(null).append("tspan").attr("x",0).attr("y",l).attr("dy",c+"em"),h=[f];r=o.pop();)u.push(r),f.text(u.join(" ")),f.node().getComputedTextLength()>n&&(u.pop(),f.text(u.join(" ")),u=[r],f=i.append("tspan").attr("x",0).attr("y",l).text(r),h.push(f));for(var d=0;d<h.length;++d){var p=h[d];p.attr("dy",c-(h.length-d-1)*s+"em")}})}var a=t("./lib/d3-small"),u={treeLayout:null,diagonalProjection:null,sprigTree:null,graphSVGGroup:null,graph:null,treeNodeAnimationDuration:750,maxLabelWidth:140};u.init=function(t,e){this.treeLayout=a.layout.tree(),this.treeLayout.nodeSize([160,160]),this.sprigTree=t,this.diagonalProjection=a.svg.diagonal().projection(function(t){return[t.y,t.x]}),this.graph=e,this.graphSVGGroup=e.svgRoot},u.update=function(t,e){e||(e=this.treeNodeAnimationDuration);var n=this.treeLayout.nodes(this.sprigTree).reverse();n.forEach(function(t){var e=t.x,n=t.x0;t.x=t.y,t.x0=t.y0,t.y=e,t.y0=n});var r=this.treeLayout.links(n);n.forEach(function(t){t.x=180*t.depth});var a=this.graphSVGGroup.selectAll("g.node").data(n,function(t){return t.id||(t.id=++i)}),s=a.enter().append("g").attr("class","node").attr("transform",function(){return"translate("+t.y0+","+t.x0+")"}).attr("id",function(t){return t.id}).on("click",u.respondToNodeClick).on("dblclick",this.onNodeDoubleClick.bind(this));this.graph.documentIsEditable()&&this.addDragToNodeSelection(s),s.append("circle").attr("r",1e-6).style("fill",function(t){return t._children?"lightsteelblue":"#fff"}).style("fill-opacity",.7).style("stroke","rgba(0, 64, 192, 0.7)"),s.append("text").attr("x",function(t){return t.children||t._children?"0.3em":"-0.3em"}).attr("y","-1em").attr("dy",".35em").attr("text-anchor","middle").text(function(t){return t.title}).style("fill-opacity",1e-6);var l=a.transition().duration(e).attr("transform",function(t){return"translate("+t.y+","+t.x+")"});l.select("circle").attr("r",8).style("fill",function(t){var e="lightsteelblue";return this.graph.nodeHasFocus(t)?e="#e0362f":"boolean"==typeof t.emphasize&&t.emphasize&&(e="#08a"),e}.bind(this)).style("fill-opacity",function(t){var e=.7;return this.graph.nodeHasFocus(t)&&(e=1),e}.bind(this)).style("stroke-width",function(t){return t._children&&t._children.length>0?"32px":0}),l.select("text").style("fill-opacity",function(t){return this.graph.nodeHasFocus(t)?1:.85}.bind(this)).call(o,function(t){return t.title},this.maxLabelWidth);var c=a.exit().transition().duration(e).attr("transform",function(){return"translate("+t.y+","+t.x+")"}).remove();c.select("circle").attr("r",1e-6),c.select("text").style("fill-opacity",1e-6);var f=this.graphSVGGroup.selectAll("path.link").data(r,function(t){return t.target.id});f.enter().insert("path","g").attr("class","link").attr("d",function(){var e={x:t.x0,y:t.y0};return this.diagonalProjection({source:e,target:e})}.bind(this)),f.attr("d",this.diagonalProjection).attr("stroke-width",function(t){return this.graph.nodeWasVisited(t.target)?3:1.5}.bind(this)),f.exit().transition().duration(e).attr("d",function(){var e={x:t.x,y:t.y};return this.diagonalProjection({source:e,target:e})}.bind(this)).remove(),n.forEach(function(t){t.x0=t.x,t.y0=t.y})},u.respondToNodeClick=function(t){u.graph.treeNav.chooseTreeNode(t,this)},u.onNodeDoubleClick=function(t){this.graph.treeNav.toggleChildren(t),this.update(t)},u.addDragToNodeSelection=function(t){var e=a.behavior.drag();e.on("dragstart",function(t){a.event.sourceEvent.stopPropagation(),t.x0=t.x,t.y0=t.y}),e.on("drag",function(t){a.event.sourceEvent.stopPropagation(),this.setAttribute("transform",r(a.event.x,a.event.y)),t.x=a.event.y,t.y=a.event.x}),e.on("dragend",function(t){a.event.sourceEvent.stopPropagation(),u.graph.nodeWasDragged(t,this)}),t.call(e)},e.exports=u},{"./lib/d3-small":14}]},{},[11]);